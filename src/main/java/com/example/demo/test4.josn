ctIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.129 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2594(String)
2021-03-11 17:21:55.250 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:55.250 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.251 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2586(String)
2021-03-11 17:21:55.282 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:55.282 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.282 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2583(String)
2021-03-11 17:21:55.387  INFO 38652 --- [io-8101-exec-24] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454505746,结束时间：=1615454515387,新增属性耗时：9641
2021-03-11 17:21:55.395 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.395 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.405 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.405 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.405 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.426 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.426 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.426 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.432 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.432 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.432 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.436 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.436 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.436 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2589(String), qq_test_2589(String), qq_test_2589(String)
2021-03-11 17:21:55.455 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.455 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.455 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975309713409(Long)
2021-03-11 17:21:55.461 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.461 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.461 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975309713408(Long)
2021-03-11 17:21:55.464 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.464 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.464 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975309713409(Long)
2021-03-11 17:21:55.470 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.470 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.470 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975309713408(Long)
2021-03-11 17:21:55.486 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.486 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.486 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382979717926912(Long), 4134382975309713409(Long), 2021-03-11 17:21:55.486(Timestamp), 999(Integer)
2021-03-11 17:21:55.491 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.491 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.492 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382979738898432(Long), 4134382975309713408(Long), 2021-03-11 17:21:55.491(Timestamp), 999(Integer)
2021-03-11 17:21:55.502 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.502 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.502 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.513 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.513 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.514 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975309713409(Long), 4133627517309423616(Long), qq_test_2592(String), qq_test_2592(String), RW(String), 4(String), 2021-03-11 17:21:55.502(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.524 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.524 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.524 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.528 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.528 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.528 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975309713408(Long), 4133627517309423616(Long), qq_test_2591(String), qq_test_2591(String), RW(String), 4(String), 2021-03-11 17:21:55.524(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.530 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.530 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.531 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.538 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.539 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.539 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975347462145(Long)
2021-03-11 17:21:55.539 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.541 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.541 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.541 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.549 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.549 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.549 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975347462145(Long)
2021-03-11 17:21:55.551 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.571 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.572 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.572 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382980074442752(Long), 4134382975347462145(Long), 2021-03-11 17:21:55.571(Timestamp), 999(Integer)
Exception in thread "Thread-167" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.597 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.597 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.598 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-168" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.603 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.603 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.604 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975347462145(Long), 4133627517309423616(Long), qq_test_2582(String), qq_test_2582(String), RW(String), 4(String), 2021-03-11 17:21:55.597(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.615 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.615 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.615 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975389405184(Long)
2021-03-11 17:21:55.623 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.624 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.624 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.624 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.624 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.624 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975389405184(Long)
2021-03-11 17:21:55.630 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.630 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.630 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.630 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975636869120(Long)
2021-03-11 17:21:55.630 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.630 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975347462144(Long)
2021-03-11 17:21:55.632 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.642 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.642 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.642 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.642 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.642 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.642 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975636869120(Long)
2021-03-11 17:21:55.642 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975347462144(Long)
2021-03-11 17:21:55.642 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.643 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382980372238336(Long), 4134382975389405184(Long), 2021-03-11 17:21:55.642(Timestamp), 999(Integer)
2021-03-11 17:21:55.654 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.654 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.654 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.654 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.654 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.654 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.654 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.655 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382980422569984(Long), 4134382975347462144(Long), 2021-03-11 17:21:55.654(Timestamp), 999(Integer)
2021-03-11 17:21:55.655 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382980422569985(Long), 4134382975636869120(Long), 2021-03-11 17:21:55.654(Timestamp), 999(Integer)
Exception in thread "Thread-169" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.686 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.686 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.687 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975389405184(Long), 4133627517309423616(Long), qq_test_2584(String), qq_test_2584(String), RW(String), 4(String), 2021-03-11 17:21:55.654(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.699 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.699 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.699 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.699 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.699 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.699 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.701 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:55.701 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:55.701 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382975624286208(Long)
2021-03-11 17:21:55.705 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.705 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.705 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.705 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.705 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.705 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.705 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.706 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975347462144(Long), 4133627517309423616(Long), qq_test_2594(String), qq_test_2594(String), RW(String), 4(String), 2021-03-11 17:21:55.699(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.706 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975636869120(Long), 4133627517309423616(Long), qq_test_2586(String), qq_test_2586(String), RW(String), 4(String), 2021-03-11 17:21:55.699(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:55.706 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:55.706 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:55.706 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382975624286208(Long)
2021-03-11 17:21:55.713 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.716 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.716 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.716 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.724 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.724 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.724 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.725 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:55.725 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:55.726 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.726 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382980720365568(Long), 4134382975624286208(Long), 2021-03-11 17:21:55.725(Timestamp), 999(Integer)
2021-03-11 17:21:55.729 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.735 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.736 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.736 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.740 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.740 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:55.740 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382975624286208(Long), 4133627517309423616(Long), qq_test_2583(String), qq_test_2583(String), RW(String), 4(String), 2021-03-11 17:21:55.736(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-170" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.749 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:55.749 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.749 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-171" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-172" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.757 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:55.782 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:55.782 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.782 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2589(String)
2021-03-11 17:21:55.783  INFO 38652 --- [io-8101-exec-17] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454505846,结束时间：=1615454515783,新增属性耗时：9937
2021-03-11 17:21:55.784  INFO 38652 --- [io-8101-exec-36] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454506167,结束时间：=1615454515784,新增属性耗时：9617
2021-03-11 17:21:55.784  INFO 38652 --- [io-8101-exec-18] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454505919,结束时间：=1615454515784,新增属性耗时：9865
2021-03-11 17:21:55.787 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.787 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
Exception in thread "Thread-173" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:55.792 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.792 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.792 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.792 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.792 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.793 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.793 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.809 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.809 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.809 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.816 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.816 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.817 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.826 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.826 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.826 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.828 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.828 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.828 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.828 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.828 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.828 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.833 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.833  INFO 38652 --- [io-8101-exec-13] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454506167,结束时间：=1615454515833,新增属性耗时：9666
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.833 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2554(String), qq_test_2554(String), qq_test_2554(String)
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.833 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2585(String), qq_test_2585(String), qq_test_2585(String)
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.833 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.839 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.839 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.839 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2555(String), qq_test_2555(String), qq_test_2555(String)
2021-03-11 17:21:55.840 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.840 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.844 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.844 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.844 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.855 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.855 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.855 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.868 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.868 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.868 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.878 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.878 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.879 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2553(String), qq_test_2553(String), qq_test_2553(String)
2021-03-11 17:21:55.906  INFO 38652 --- [io-8101-exec-49] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454506463,结束时间：=1615454515906,新增属性耗时：9443
2021-03-11 17:21:55.906  INFO 38652 --- [io-8101-exec-19] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454506654,结束时间：=1615454515906,新增属性耗时：9252
2021-03-11 17:21:55.906  INFO 38652 --- [nio-8101-exec-7] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454506062,结束时间：=1615454515906,新增属性耗时：9844
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.912 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.919 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:55.936 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.936 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.936 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.943 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.943 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.943 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.947 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.959 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2552(String), qq_test_2552(String), qq_test_2552(String)
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.960 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:55.970 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.970 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.970 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2557(String), qq_test_2557(String), qq_test_2557(String)
2021-03-11 17:21:55.971 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:55.971 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:55.971 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2559(String), qq_test_2559(String), qq_test_2559(String)
2021-03-11 17:21:56.123 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.123 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.123 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2554(String)
2021-03-11 17:21:56.291 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:56.291 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:56.291 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382979378188288(Long)
2021-03-11 17:21:56.295 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:56.295 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:56.295 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382979378188288(Long)
2021-03-11 17:21:56.306 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:56.306 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:56.306 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382983157256192(Long), 4134382979378188288(Long), 2021-03-11 17:21:56.306(Timestamp), 999(Integer)
2021-03-11 17:21:56.328 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:56.329 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:56.329 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.336 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:56.336 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:56.336 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382979378188288(Long), 4133627517309423616(Long), qq_test_2589(String), qq_test_2589(String), RW(String), 4(String), 2021-03-11 17:21:56.329(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:56.342 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.342 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.342 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2555(String)
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.407 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2585(String)
2021-03-11 17:21:56.415 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-174" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:56.473 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.473 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.473 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2552(String)
2021-03-11 17:21:56.512  INFO 38652 --- [nio-8101-exec-8] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507221,结束时间：=1615454516512,新增属性耗时：9291
2021-03-11 17:21:56.523 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.523 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:56.524 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.524 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:56.524 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2553(String)
2021-03-11 17:21:56.533 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:56.534 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:56.534 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:56.553 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:56.553 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:56.553 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.562 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:56.562 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:56.562 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.568 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:56.568 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.568 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2556(String), qq_test_2556(String), qq_test_2556(String)
2021-03-11 17:21:56.571 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.571 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.571 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2559(String)
2021-03-11 17:21:56.617 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:56.617 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:56.617 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2557(String)
2021-03-11 17:21:56.672 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:56.672 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:56.672 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981064298496(Long)
2021-03-11 17:21:56.683 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:56.684 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:56.684 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981064298496(Long)
2021-03-11 17:21:56.708 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:56.709 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:56.709 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382984843366400(Long), 4134382981064298496(Long), 2021-03-11 17:21:56.708(Timestamp), 999(Integer)
2021-03-11 17:21:56.736 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:56.736 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:56.736 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.745 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:56.745 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:56.745 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981064298496(Long), 4133627517309423616(Long), qq_test_2554(String), qq_test_2554(String), RW(String), 4(String), 2021-03-11 17:21:56.736(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:56.783 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:56.783 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:56.783 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.791 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:56.922 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:56.922 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:56.922 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981001383936(Long)
2021-03-11 17:21:56.938 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:56.938 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:56.938 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981001383936(Long)
Exception in thread "Thread-175" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:56.950 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:56.950  INFO 38652 --- [io-8101-exec-27] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507234,结束时间：=1615454516950,新增属性耗时：9716
2021-03-11 17:21:56.950 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:56.950 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981064298497(Long)
2021-03-11 17:21:56.962 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:56.962 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:56.962 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:56.962 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:56.962 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:56.962 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981064298497(Long)
2021-03-11 17:21:56.962 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:56.962 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382985908719616(Long), 4134382981001383936(Long), 2021-03-11 17:21:56.962(Timestamp), 999(Integer)
2021-03-11 17:21:56.965 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:56.965 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:56.965 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981534060545(Long)
2021-03-11 17:21:56.971 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:56.971 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:56.971 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:56.972 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981534060545(Long)
2021-03-11 17:21:56.972 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:56.972 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:56.979 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:56.980 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:56.980 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382985984217088(Long), 4134382981064298497(Long), 2021-03-11 17:21:56.98(Timestamp), 999(Integer)
2021-03-11 17:21:56.985 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:56.985 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:56.986 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382986005188608(Long), 4134382981534060545(Long), 2021-03-11 17:21:56.985(Timestamp), 999(Integer)
2021-03-11 17:21:56.998 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:56.999 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:56.999 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:56.999 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:56.999 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:56.999 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.009 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.009 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.009 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.009 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.010 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.010 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.010 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.010 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.010 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981001383936(Long), 4133627517309423616(Long), qq_test_2585(String), qq_test_2585(String), RW(String), 4(String), 2021-03-11 17:21:56.999(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2565(String), qq_test_2565(String), qq_test_2565(String)
2021-03-11 17:21:57.027 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.028 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981064298497(Long), 4133627517309423616(Long), qq_test_2555(String), qq_test_2555(String), RW(String), 4(String), 2021-03-11 17:21:57.009(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.038 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.038 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.039 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981534060545(Long), 4133627517309423616(Long), qq_test_2552(String), qq_test_2552(String), RW(String), 4(String), 2021-03-11 17:21:57.027(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.046 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.046 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.046 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.062 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.062 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.062 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.062 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.062 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.063 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.063 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.082 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:57.082 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:57.082 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981219487744(Long)
2021-03-11 17:21:57.082 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.082 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.100 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:57.101 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:57.101 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981219487744(Long)
Exception in thread "Thread-176" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.120 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:57.121 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:57.121 Exception in thread "Thread-177" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382986571419648(Long), 4134382981219487744(Long), 2021-03-11 17:21:57.12(Timestamp), 999(Integer)
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-178" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.126 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:57.126 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:57.126 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981534060544(Long)
2021-03-11 17:21:57.131 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:57.131 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:57.131 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981534060544(Long)
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.142 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2556(String)
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382981534060546(Long)
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:57.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382986680471552(Long), 4134382981534060544(Long), 2021-03-11 17:21:57.146(Timestamp), 999(Integer)
2021-03-11 17:21:57.159 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.159 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.159 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981219487744(Long), 4133627517309423616(Long), qq_test_2553(String), qq_test_2553(String), RW(String), 4(String), 2021-03-11 17:21:57.142(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.164 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:57.165 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:57.165 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382981534060546(Long)
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.178 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382986848243712(Long), 4134382981534060546(Long), 2021-03-11 17:21:57.186(Timestamp), 999(Integer)
2021-03-11 17:21:57.186 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981534060544(Long), 4133627517309423616(Long), qq_test_2559(String), qq_test_2559(String), RW(String), 4(String), 2021-03-11 17:21:57.178(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.202  INFO 38652 --- [nio-8101-exec-9] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507221,结束时间：=1615454517202,新增属性耗时：9981
2021-03-11 17:21:57.212 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.212 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.219 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.219 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.219 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.219 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-179" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.229  INFO 38652 --- [io-8101-exec-46] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507234,结束时间：=1615454517229,新增属性耗时：9995
2021-03-11 17:21:57.230 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.232  INFO 38652 --- [io-8101-exec-26] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507478,结束时间：=1615454517231,新增属性耗时：9753
2021-03-11 17:21:57.237 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.237 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.237 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.244 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.244 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.244 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.244 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.244 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382981534060546(Long), 4133627517309423616(Long), qq_test_2557(String), qq_test_2557(String), RW(String), 4(String), 2021-03-11 17:21:57.219(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.248 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.248 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.248 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.248 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.248 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.253 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.253 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.253 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.253 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2561(String), qq_test_2561(String), qq_test_2561(String)
2021-03-11 17:21:57.253 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.253 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:57.258 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.258 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.258 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-180" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.279 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.284 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:57.284 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.284 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2565(String)
2021-03-11 17:21:57.289 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.289 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.289 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.289 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.291  INFO 38652 --- [io-8101-exec-25] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507394,结束时间：=1615454517291,新增属性耗时：9897
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.296 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.296 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.296 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.297 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.297 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.297 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2562(String), qq_test_2562(String), qq_test_2562(String)
2021-03-11 17:21:57.305 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.305 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.312 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.313 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.313 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2567(String), qq_test_2567(String), qq_test_2567(String)
2021-03-11 17:21:57.318 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.318 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.318 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-181" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.338 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.338 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.338 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.343 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:57.343 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:57.343 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382984109363200(Long)
2021-03-11 17:21:57.349 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.349 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.349 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.351 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:57.351 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:57.351 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382984109363200(Long)
2021-03-11 17:21:57.354 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.354 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.354 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2563(String), qq_test_2563(String), qq_test_2563(String)
2021-03-11 17:21:57.358  INFO 38652 --- [io-8101-exec-44] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507746,结束时间：=1615454517358,新增属性耗时：9612
2021-03-11 17:21:57.363 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:57.363 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:57.363 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987590635520(Long), 4134382984109363200(Long), 2021-03-11 17:21:57.363(Timestamp), 999(Integer)
2021-03-11 17:21:57.366 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.366 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.377 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.378 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.378 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:57.386 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.386 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.386 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.389 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.390 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:57.390 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382984109363200(Long), 4133627517309423616(Long), qq_test_2556(String), qq_test_2556(String), RW(String), 4(String), 2021-03-11 17:21:57.386(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:57.393  INFO 38652 --- [io-8101-exec-31] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454507478,结束时间：=1615454517393,新增属性耗时：9915
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.397 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.399 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.399 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.404 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.405 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.406 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.406 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:57.415 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.415 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.415 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.422 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.422 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.422 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2564(String), qq_test_2564(String), qq_test_2564(String)
2021-03-11 17:21:57.427 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.427 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.427 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.433 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.433 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.434 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.442 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.442 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.442 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2569(String), qq_test_2569(String), qq_test_2569(String)
Exception in thread "Thread-182" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:57.530  INFO 38652 --- [io-8101-exec-22] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508529,结束时间：=1615454517530,新增属性耗时：9001
2021-03-11 17:21:57.540 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:57.540 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:57.550 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:57.550 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:57.550 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:57.576 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:57.576 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:57.576 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.596 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:57.596 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:57.596 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:57.608 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:57.608 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.608 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2576(String), qq_test_2576(String), qq_test_2576(String)
2021-03-11 17:21:57.878 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:57.878 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:57.878 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2563(String)
2021-03-11 17:21:58.010 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.010 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.010 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2562(String)
2021-03-11 17:21:58.124 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.125 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.125 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2561(String)
2021-03-11 17:21:58.162 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.162 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.162 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382985946468352(Long)
2021-03-11 17:21:58.169 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.169 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.169 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2567(String)
2021-03-11 17:21:58.173 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.173 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.173 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382985946468352(Long)
2021-03-11 17:21:58.193 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.193 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.193 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382991071907840(Long), 4134382985946468352(Long), 2021-03-11 17:21:58.193(Timestamp), 999(Integer)
2021-03-11 17:21:58.223 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.223 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.223 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.233 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.233 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.233 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.233 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2569(String)
2021-03-11 17:21:58.233 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.234 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382985946468352(Long), 4133627517309423616(Long), qq_test_2565(String), qq_test_2565(String), RW(String), 4(String), 2021-03-11 17:21:58.223(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.257 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.257 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.257 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.265 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-183" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.304 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.304 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.304 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2564(String)
2021-03-11 17:21:58.452 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.452 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.452 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382987401891840(Long)
2021-03-11 17:21:58.460 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.460 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.460 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382987401891840(Long)
2021-03-11 17:21:58.475 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.475 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.476 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382992254701568(Long), 4134382987401891840(Long), 2021-03-11 17:21:58.475(Timestamp), 999(Integer)
2021-03-11 17:21:58.479  INFO 38652 --- [io-8101-exec-14] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508614,结束时间：=1615454518479,新增属性耗时：9865
2021-03-11 17:21:58.489 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:58.489 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:58.492 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.492 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.492 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.498 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:58.498 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:58.499 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:58.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987401891840(Long), 4133627517309423616(Long), qq_test_2563(String), qq_test_2563(String), RW(String), 4(String), 2021-03-11 17:21:58.492(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.511 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:58.511 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.511 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.520 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.520 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.520 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.520 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.523 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.523 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.523 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2570(String), qq_test_2570(String), qq_test_2570(String)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:58.533 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.533 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.533 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382987150233600(Long)
2021-03-11 17:21:58.544 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.544 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.544 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382987150233600(Long)
Exception in thread "Thread-184" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.558 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.558 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.558 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382992602828800(Long), 4134382987150233600(Long), 2021-03-11 17:21:58.558(Timestamp), 999(Integer)
2021-03-11 17:21:58.566 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.566 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.566 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2576(String)
2021-03-11 17:21:58.586 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.586 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.586 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.593 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.593 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.594 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987150233600(Long), 4133627517309423616(Long), qq_test_2562(String), qq_test_2562(String), RW(String), 4(String), 2021-03-11 17:21:58.586(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.618 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.618 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.618 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.626 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:58.639 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.639 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.639 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382986986655744(Long)
2021-03-11 17:21:58.644 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.644 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.644 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382986986655744(Long)
Exception in thread "Thread-185" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.660 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.660 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.660 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993030647808(Long), 4134382986986655744(Long), 2021-03-11 17:21:58.66(Timestamp), 999(Integer)
2021-03-11 17:21:58.674 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.674 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.674 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.685  INFO 38652 --- [io-8101-exec-38] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508780,结束时间：=1615454518685,新增属性耗时：9905
2021-03-11 17:21:58.685 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.685 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.686 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382986986655744(Long), 4133627517309423616(Long), qq_test_2561(String), qq_test_2561(String), RW(String), 4(String), 2021-03-11 17:21:58.674(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.692 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:58.692 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382987649355776(Long)
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:58.703 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:58.707 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.707 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.707 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.707 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.707 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.707 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382987649355776(Long)
2021-03-11 17:21:58.717 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.717 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:58.717 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.718 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.718 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.718 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.718 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993269723136(Long), 4134382987649355776(Long), 2021-03-11 17:21:58.717(Timestamp), 999(Integer)
2021-03-11 17:21:58.722 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.723 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.723 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.733 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2566(String), qq_test_2566(String), qq_test_2566(String)
Exception in thread "Thread-186" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.747 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.748 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.748 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987649355776(Long), 4133627517309423616(Long), qq_test_2564(String), qq_test_2564(String), RW(String), 4(String), 2021-03-11 17:21:58.733(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.766 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.766 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.766 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.775 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-187" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.819 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.820 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.820 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382987129262080(Long)
2021-03-11 17:21:58.824 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.824 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.824 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382987129262080(Long)
2021-03-11 17:21:58.831 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.831 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.831 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993747873792(Long), 4134382987129262080(Long), 2021-03-11 17:21:58.831(Timestamp), 999(Integer)
2021-03-11 17:21:58.844 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.844 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.844 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.851 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.851 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.852 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987129262080(Long), 4133627517309423616(Long), qq_test_2567(String), qq_test_2567(String), RW(String), 4(String), 2021-03-11 17:21:58.844(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.860 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.861 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.861 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382987766796288(Long)
2021-03-11 17:21:58.863  INFO 38652 --- [io-8101-exec-47] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508707,结束时间：=1615454518863,新增属性耗时：10156
2021-03-11 17:21:58.866 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:58.866 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.866 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2570(String)
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382987766796288(Long)
2021-03-11 17:21:58.869 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.879 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:58.879 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:58.879 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:58.879 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:58.885 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.885 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.885 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993974366208(Long), 4134382987766796288(Long), 2021-03-11 17:21:58.885(Timestamp), 999(Integer)
2021-03-11 17:21:58.895 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:58.895 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.895 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.897  INFO 38652 --- [nio-8101-exec-5] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508614,结束时间：=1615454518897,新增属性耗时：10283
2021-03-11 17:21:58.908 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.908 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.908 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-188" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:58.913 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:58.913 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:58.913 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.913 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.913 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.916 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.917 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:58.917 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382987766796288(Long), 4133627517309423616(Long), qq_test_2569(String), qq_test_2569(String), RW(String), 4(String), 2021-03-11 17:21:58.908(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.919 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382988374970368(Long)
2021-03-11 17:21:58.920 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2568(String), qq_test_2568(String), qq_test_2568(String)
2021-03-11 17:21:58.920 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:58.920 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.945 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:58.953 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:58.953 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:58.953 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382988374970368(Long)
2021-03-11 17:21:58.953 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.955 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:58.955 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:58.955 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:58.960 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:58.960  INFO 38652 --- [io-8101-exec-32] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508838,结束时间：=1615454518960,新增属性耗时：10122
2021-03-11 17:21:58.961 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:58.961 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2574(String), qq_test_2574(String), qq_test_2574(String)
2021-03-11 17:21:58.975 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:58.975 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:58.975 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382994351853568(Long), 4134382988374970368(Long), 2021-03-11 17:21:58.975(Timestamp), 999(Integer)
2021-03-11 17:21:58.976 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:58.976 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:58.984 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:58.984 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:58.984 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.002 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.003 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.003 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.009  INFO 38652 --- [io-8101-exec-50] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508627,结束时间：=1615454519009,新增属性耗时：10382
2021-03-11 17:21:59.012 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.012 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.012 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.015 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:59.015 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:59.019 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.019 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.019 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.023 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.023 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:59.024 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.024 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2571(String), qq_test_2571(String), qq_test_2571(String)
2021-03-11 17:21:59.024 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:59.024 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.027 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.027 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:59.028 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382988374970368(Long), 4133627517309423616(Long), qq_test_2576(String), qq_test_2576(String), RW(String), 4(String), 2021-03-11 17:21:59.019(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:59.053 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.053 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.053 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.056  INFO 38652 --- [io-8101-exec-34] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454508841,结束时间：=1615454519056,新增属性耗时：10215
2021-03-11 17:21:59.060 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.060 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.060 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.060 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:59.068 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:59.068 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:59.068 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.068 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.068 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.078 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.079 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.079 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2573(String), qq_test_2573(String), qq_test_2573(String)
2021-03-11 17:21:59.080 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:59.080 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:59.080 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.100 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.100 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.100 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.112 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.112 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.112 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.113 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.113 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.113 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2566(String)
2021-03-11 17:21:59.119 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.119 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.119 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2578(String), qq_test_2578(String), qq_test_2578(String)
Exception in thread "Thread-189" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-190" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:59.198  INFO 38652 --- [io-8101-exec-23] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454519198,新增属性耗时：8934
2021-03-11 17:21:59.203 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:59.204 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:59.204 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382992351170560(Long)
2021-03-11 17:21:59.209 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:59.209 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:59.216 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:59.216 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:59.216 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382992351170560(Long)
2021-03-11 17:21:59.218 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:59.219 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:59.219 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.236 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:59.236 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:59.237 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382995446566912(Long), 4134382992351170560(Long), 2021-03-11 17:21:59.236(Timestamp), 999(Integer)
2021-03-11 17:21:59.240 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.240 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.240 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.256 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.257 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.257 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.257 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.257 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.257 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.266 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.267 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:59.267 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382992351170560(Long), 4133627517309423616(Long), qq_test_2570(String), qq_test_2570(String), RW(String), 4(String), 2021-03-11 17:21:59.256(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:59.270 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.270 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.270 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2580(String), qq_test_2580(String), qq_test_2580(String)
2021-03-11 17:21:59.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.301 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-191" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:59.338 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.338 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.338 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2568(String)
2021-03-11 17:21:59.491 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.491 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.491 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2574(String)
2021-03-11 17:21:59.602 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:59.602 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:59.602 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382993211002880(Long)
2021-03-11 17:21:59.613 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:59.613 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:59.613 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382993211002880(Long)
2021-03-11 17:21:59.634 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:59.635 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:59.635 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382997115899904(Long), 4134382993211002880(Long), 2021-03-11 17:21:59.634(Timestamp), 999(Integer)
2021-03-11 17:21:59.648 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.648 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.648 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2578(String)
2021-03-11 17:21:59.662  INFO 38652 --- [io-8101-exec-12] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454519662,新增属性耗时：9398
2021-03-11 17:21:59.668 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.668 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.668 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.670 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:59.671 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:59.677 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.677 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:59.677 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993211002880(Long), 4133627517309423616(Long), qq_test_2566(String), qq_test_2566(String), RW(String), 4(String), 2021-03-11 17:21:59.668(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:59.684 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:59.684 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:59.684 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.692 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.692 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.692 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2571(String)
2021-03-11 17:21:59.694 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.695 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.695 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.700 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.700 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.700 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.705 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.708 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.708 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.708 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:59.716 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.716 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.716 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.716 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.716 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2573(String)
2021-03-11 17:21:59.716 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2579(String), qq_test_2579(String), qq_test_2579(String)
Exception in thread "Thread-192" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:21:59.795  INFO 38652 --- [io-8101-exec-20] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454519795,新增属性耗时：9531
2021-03-11 17:21:59.802 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:21:59.802 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:21:59.808 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:21:59.809 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:21:59.809 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:21:59.822 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:21:59.822 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.822 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.827 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.827 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.827 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.833 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.833 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.833 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2577(String), qq_test_2577(String), qq_test_2577(String)
2021-03-11 17:21:59.869 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:59.869 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:59.869 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382994116972544(Long)
2021-03-11 17:21:59.883 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:59.883 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:59.883 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382994116972544(Long)
2021-03-11 17:21:59.895 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:59.895 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:59.895 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382998210613248(Long), 4134382994116972544(Long), 2021-03-11 17:21:59.895(Timestamp), 999(Integer)
2021-03-11 17:21:59.923 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.923 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.923 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.926 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:21:59.927 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:21:59.927 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2580(String)
2021-03-11 17:21:59.931 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:21:59.931 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:21:59.931 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382994116972544(Long), 4133627517309423616(Long), qq_test_2574(String), qq_test_2574(String), RW(String), 4(String), 2021-03-11 17:21:59.923(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:21:59.950 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:21:59.950 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:21:59.950 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382993949200384(Long)
2021-03-11 17:21:59.959 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:21:59.959 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:21:59.959 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382993949200384(Long)
2021-03-11 17:21:59.969 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.969 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:21:59.969 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:21:59.976 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:21:59.976 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:21:59.977 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:21:59.977 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382998550351872(Long), 4134382993949200384(Long), 2021-03-11 17:21:59.976(Timestamp), 999(Integer)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:21:59.995 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:21:59.995 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:21:59.995 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.001 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.001 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.001 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382993949200384(Long), 4133627517309423616(Long), qq_test_2568(String), qq_test_2568(String), RW(String), 4(String), 2021-03-11 17:21:59.995(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-193" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.023 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.023 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.023 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.034 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.098 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.098 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.098 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382994389602304(Long)
2021-03-11 17:22:00.100 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.100 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.100 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2579(String)
2021-03-11 17:22:00.105 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.105 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.105 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382994389602304(Long)
Exception in thread "Thread-194" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.128 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.128  INFO 38652 --- [io-8101-exec-10] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454520128,新增属性耗时：9864
2021-03-11 17:22:00.129 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.129 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999187886080(Long), 4134382994389602304(Long), 2021-03-11 17:22:00.128(Timestamp), 999(Integer)
2021-03-11 17:22:00.137 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:00.137 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:00.146 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:00.152  INFO 38652 --- [io-8101-exec-37] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454520152,新增属性耗时：9888
2021-03-11 17:22:00.152 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.152 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.153 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382994389602304(Long), 4133627517309423616(Long), qq_test_2571(String), qq_test_2571(String), RW(String), 4(String), 2021-03-11 17:22:00.146(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.155 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:00.155 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:00.156 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:00.157 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.157 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:00.164 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:00.168 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.168 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.168 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:00.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.177 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.177 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.177 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2575(String), qq_test_2575(String), qq_test_2575(String)
2021-03-11 17:22:00.177 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.182 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.182 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.182 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.191 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.191 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.191 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2560(String), qq_test_2560(String), qq_test_2560(String)
Exception in thread "Thread-195" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382994792255488(Long)
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2577(String)
2021-03-11 17:22:00.237 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382994553180160(Long)
2021-03-11 17:22:00.248 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.248 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.248 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382994553180160(Long)
2021-03-11 17:22:00.252 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.252 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.252 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382994792255488(Long)
2021-03-11 17:22:00.269 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.269 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.269 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999779282944(Long), 4134382994553180160(Long), 2021-03-11 17:22:00.269(Timestamp), 999(Integer)
2021-03-11 17:22:00.275 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.275 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.275 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999804448768(Long), 4134382994792255488(Long), 2021-03-11 17:22:00.275(Timestamp), 999(Integer)
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.287 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382994792255488(Long), 4133627517309423616(Long), qq_test_2578(String), qq_test_2578(String), RW(String), 4(String), 2021-03-11 17:22:00.287(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.295 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382994553180160(Long), 4133627517309423616(Long), qq_test_2573(String), qq_test_2573(String), RW(String), 4(String), 2021-03-11 17:22:00.287(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.299  INFO 38652 --- [io-8101-exec-45] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510264,结束时间：=1615454520299,新增属性耗时：10035
2021-03-11 17:22:00.305 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.305 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:00.305 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.305 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.305 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:00.305 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.305 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.306 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.319 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:00.320 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:00.320 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.320 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:00.320 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.337 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:00.337 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.337 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-196" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-197" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.353 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.353 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.353 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.365 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.365 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.365 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2572(String), qq_test_2572(String), qq_test_2572(String)
2021-03-11 17:22:00.394 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.394 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.394 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382995371069440(Long)
2021-03-11 17:22:00.403 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.403 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.403 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382995371069440(Long)
2021-03-11 17:22:00.423 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.423 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.423 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383000425205760(Long), 4134382995371069440(Long), 2021-03-11 17:22:00.423(Timestamp), 999(Integer)
2021-03-11 17:22:00.455 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.455 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.456 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.471 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.471 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.471 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382995371069440(Long), 4133627517309423616(Long), qq_test_2580(String), qq_test_2580(String), RW(String), 4(String), 2021-03-11 17:22:00.455(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.506 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.506 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.506 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382997325615104(Long)
2021-03-11 17:22:00.506 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382997845708800(Long)
2021-03-11 17:22:00.513 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.513 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.513 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.513 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382997845708800(Long)
2021-03-11 17:22:00.513 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.513 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382997325615104(Long)
2021-03-11 17:22:00.513 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.523 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.523 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.523 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.523 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.523 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383000844636160(Long), 4134382997845708800(Long), 2021-03-11 17:22:00.523(Timestamp), 999(Integer)
2021-03-11 17:22:00.523 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383000844636161(Long), 4134382997325615104(Long), 2021-03-11 17:22:00.523(Timestamp), 999(Integer)
2021-03-11 17:22:00.533 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.533 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.533 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.533 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.533 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.533 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-198" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.540 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.540 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.540 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.540 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.540 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382997845708800(Long), 4133627517309423616(Long), qq_test_2577(String), qq_test_2577(String), RW(String), 4(String), 2021-03-11 17:22:00.533(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.540 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382997325615104(Long), 4133627517309423616(Long), qq_test_2579(String), qq_test_2579(String), RW(String), 4(String), 2021-03-11 17:22:00.533(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.548 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.548 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.548 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.548 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.548 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.548 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.551 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.552 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.552 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2560(String)
2021-03-11 17:22:00.554  INFO 38652 --- [io-8101-exec-16] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510432,结束时间：=1615454520554,新增属性耗时：10122
2021-03-11 17:22:00.555  INFO 38652 --- [io-8101-exec-29] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454510432,结束时间：=1615454520555,新增属性耗时：10123
2021-03-11 17:22:00.556 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.556 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.563 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.563 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:00.563 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.563 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:00.563 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2575(String)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.578 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:00.578 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:00.578 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-199" Exception in thread "Thread-200" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.593 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:00.593 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.593 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.611 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.611 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.611 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.613 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.614 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.614 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2572(String)
2021-03-11 17:22:00.625 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.626 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.626 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_2558(String), qq_test_2558(String), qq_test_2558(String)
2021-03-11 17:22:00.762 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.762 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.763 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.763 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382999338881024(Long)
2021-03-11 17:22:00.763 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.763 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382999263383552(Long)
2021-03-11 17:22:00.771  INFO 38652 --- [io-8101-exec-48] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512386,结束时间：=1615454520771,新增属性耗时：8385
2021-03-11 17:22:00.771  INFO 38652 --- [nio-8101-exec-6] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512066,结束时间：=1615454520771,新增属性耗时：8705
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.771  INFO 38652 --- [io-8101-exec-42] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454511934,结束时间：=1615454520771,新增属性耗时：8837
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382999263383552(Long)
2021-03-11 17:22:00.771 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382999338881024(Long)
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383001956126720(Long), 4134382999263383552(Long), 2021-03-11 17:22:00.788(Timestamp), 999(Integer)
2021-03-11 17:22:00.788 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383001956126721(Long), 4134382999338881024(Long), 2021-03-11 17:22:00.788(Timestamp), 999(Integer)
2021-03-11 17:22:00.808 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:00.808 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:00.808 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134382999988998144(Long)
2021-03-11 17:22:00.812 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:00.812 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:00.812 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134382999988998144(Long)
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.817 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.821 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.821 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.821 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.821 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.822 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999263383552(Long), 4133627517309423616(Long), qq_test_2575(String), qq_test_2575(String), RW(String), 4(String), 2021-03-11 17:22:00.817(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.822 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999338881024(Long), 4133627517309423616(Long), qq_test_2560(String), qq_test_2560(String), RW(String), 4(String), 2021-03-11 17:22:00.817(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.822 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:00.822 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:00.823 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383002098733056(Long), 4134382999988998144(Long), 2021-03-11 17:22:00.822(Timestamp), 999(Integer)
2021-03-11 17:22:00.831 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.832 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:00.832 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.833 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:00.839 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:00.839 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:00.840 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134382999988998144(Long), 4133627517309423616(Long), qq_test_2572(String), qq_test_2572(String), RW(String), 4(String), 2021-03-11 17:22:00.831(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:00.845 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.845 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:00.850 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:00.850 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:00.851 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.856 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:00.869 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:00.869 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:00.869 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_2558(String)
Exception in thread "Thread-202" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-201" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-203" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:00.985  INFO 38652 --- [io-8101-exec-30] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512450,结束时间：=1615454520985,新增属性耗时：8535
2021-03-11 17:22:01.021  INFO 38652 --- [io-8101-exec-28] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512386,结束时间：=1615454521021,新增属性耗时：8635
2021-03-11 17:22:01.021  INFO 38652 --- [nio-8101-exec-2] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512506,结束时间：=1615454521021,新增属性耗时：8515
2021-03-11 17:22:01.046 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:01.046 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:01.046 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383001075322880(Long)
2021-03-11 17:22:01.060 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:01.061 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:01.061 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383001075322880(Long)
2021-03-11 17:22:01.083 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:01.083 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:01.083 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383003193446400(Long), 4134383001075322880(Long), 2021-03-11 17:22:01.083(Timestamp), 999(Integer)
2021-03-11 17:22:01.107 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:01.107 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:01.107 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:01.125 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:01.125 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:01.126 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383001075322880(Long), 4133627517309423616(Long), qq_test_2558(String), qq_test_2558(String), RW(String), 4(String), 2021-03-11 17:22:01.107(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:01.167 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:01.167 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:01.167 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:01.197 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-204" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:01.385  INFO 38652 --- [nio-8101-exec-4] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454512506,结束时间：=1615454521385,新增属性耗时：8879
2021-03-11 17:22:22.095 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.095 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.103 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.103 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.103 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.103 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.103 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.114 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.114 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.115 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.115 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.115 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.124 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.125 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.125 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.143 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.143 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.144 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.144 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.144 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.146 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.153 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.153 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.153 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.154 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.154 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.154 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.154 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3001(String), qq_test_3001(String), qq_test_3001(String)
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3000(String), qq_test_3000(String), qq_test_3000(String)
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.164 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.168 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.168 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.168 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.168 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.169 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.169 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.175 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.175 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3002(String), qq_test_3002(String), qq_test_3002(String)
2021-03-11 17:22:22.175 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.175 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.178 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.179 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.179 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.185 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.185 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.185 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.192 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:22.192 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3004(String), qq_test_3004(String), qq_test_3004(String)
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.193 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3003(String), qq_test_3003(String), qq_test_3003(String)
2021-03-11 17:22:22.193 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.193 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.193 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.213 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.213 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.213 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3005(String), qq_test_3005(String), qq_test_3005(String)
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.213 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3006(String), qq_test_3006(String), qq_test_3006(String)
2021-03-11 17:22:22.223 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3007(String), qq_test_3007(String), qq_test_3007(String)
2021-03-11 17:22:22.632 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.632 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.632 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3001(String)
2021-03-11 17:22:22.811 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.812 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.812 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3004(String)
2021-03-11 17:22:22.819 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.819 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.819 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3006(String)
2021-03-11 17:22:22.847 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.847 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.847 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3007(String)
2021-03-11 17:22:22.895 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.895 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.895 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3003(String)
2021-03-11 17:22:22.936 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.936 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.936 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3002(String)
2021-03-11 17:22:22.944 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.944 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.945 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3000(String)
2021-03-11 17:22:22.966 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:22.966 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:22.966 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3005(String)
2021-03-11 17:22:23.029 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.030 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.030 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091408048128(Long)
2021-03-11 17:22:23.035 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.035 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.035 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091408048128(Long)
2021-03-11 17:22:23.046 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.046 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.047 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383095312945152(Long), 4134383091408048128(Long), 2021-03-11 17:22:23.046(Timestamp), 999(Integer)
2021-03-11 17:22:23.101 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.101 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.101 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.111 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.111 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.112 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091408048128(Long), 4133627517309423616(Long), qq_test_3001(String), qq_test_3001(String), RW(String), 4(String), 2021-03-11 17:22:23.101(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.126 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.127 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.127 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.138 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-205" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:23.288 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.288 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.288 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091567431680(Long)
2021-03-11 17:22:23.299 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.299 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.299 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091357716480(Long)
2021-03-11 17:22:23.306 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.306 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.306 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.306 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091357716480(Long)
2021-03-11 17:22:23.306 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.306 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091567431680(Long)
2021-03-11 17:22:23.324  INFO 38652 --- [io-8101-exec-43] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542097,结束时间：=1615454543324,新增属性耗时：1227
2021-03-11 17:22:23.327 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.327 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.327 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096491544576(Long), 4134383091357716480(Long), 2021-03-11 17:22:23.327(Timestamp), 999(Integer)
2021-03-11 17:22:23.330 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.331 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.331 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096504127488(Long), 4134383091567431680(Long), 2021-03-11 17:22:23.33(Timestamp), 999(Integer)
2021-03-11 17:22:23.332 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.332 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.348 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.348 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.348 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.357 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.357 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.357 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.361 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.361 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.361 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.361 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.361 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.361 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.366 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.366 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.367 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091357716480(Long), 4133627517309423616(Long), qq_test_3000(String), qq_test_3000(String), RW(String), 4(String), 2021-03-11 17:22:23.357(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.370 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.370 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.370 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091567431680(Long), 4133627517309423616(Long), qq_test_3005(String), qq_test_3005(String), RW(String), 4(String), 2021-03-11 17:22:23.361(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.373 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.373 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.373 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.375 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.375 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.375 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091630346240(Long)
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.389 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3008(String), qq_test_3008(String), qq_test_3008(String)
2021-03-11 17:22:23.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.397 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.397 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.397 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.397 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091630346240(Long)
2021-03-11 17:22:23.406 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.407 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.407 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.407 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091529682944(Long)
2021-03-11 17:22:23.411 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:23.414 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.414 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.414 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091567431681(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091529682944(Long)
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091659706368(Long)
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383091445796864(Long)
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.421 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096885809152(Long), 4134383091630346240(Long), 2021-03-11 17:22:23.421(Timestamp), 999(Integer)
2021-03-11 17:22:23.425 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.425 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.425 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091567431681(Long)
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091445796864(Long)
2021-03-11 17:22:23.430 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383091659706368(Long)
2021-03-11 17:22:23.433 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.433 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.433 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.433 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.434 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.434 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096936140800(Long), 4134383091529682944(Long), 2021-03-11 17:22:23.433(Timestamp), 999(Integer)
Exception in thread "Thread-206" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096965500928(Long), 4134383091445796864(Long), 2021-03-11 17:22:23.44(Timestamp), 999(Integer)
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096965500929(Long), 4134383091567431681(Long), 2021-03-11 17:22:23.44(Timestamp), 999(Integer)
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096965500930(Long), 4134383091659706368(Long), 2021-03-11 17:22:23.44(Timestamp), 999(Integer)
2021-03-11 17:22:23.440 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091630346240(Long), 4133627517309423616(Long), qq_test_3006(String), qq_test_3006(String), RW(String), 4(String), 2021-03-11 17:22:23.433(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-207" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:23.444 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.444 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.444 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.452 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091529682944(Long), 4133627517309423616(Long), qq_test_3003(String), qq_test_3003(String), RW(String), 4(String), 2021-03-11 17:22:23.444(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.456 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:23.457 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091445796864(Long), 4133627517309423616(Long), qq_test_3002(String), qq_test_3002(String), RW(String), 4(String), 2021-03-11 17:22:23.452(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.457 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091659706368(Long), 4133627517309423616(Long), qq_test_3007(String), qq_test_3007(String), RW(String), 4(String), 2021-03-11 17:22:23.452(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.457 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383091567431681(Long), 4133627517309423616(Long), qq_test_3004(String), qq_test_3004(String), RW(String), 4(String), 2021-03-11 17:22:23.452(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:23.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.466 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.473 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.475 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:23.475 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.475 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.479 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.479 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.480 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:23.487 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-208" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-210" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-209" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-211" Exception in thread "Thread-212" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:23.588 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:23.588 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.588 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3008(String)
2021-03-11 17:22:23.607  INFO 38652 --- [nio-8101-exec-1] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542136,结束时间：=1615454543607,新增属性耗时：1471
2021-03-11 17:22:23.608  INFO 38652 --- [io-8101-exec-22] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542146,结束时间：=1615454543608,新增属性耗时：1462
2021-03-11 17:22:23.611 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.611 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.611  INFO 38652 --- [io-8101-exec-24] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542116,结束时间：=1615454543611,新增属性耗时：1495
2021-03-11 17:22:23.611 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.611 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.615 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.615 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.615  INFO 38652 --- [io-8101-exec-25] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542088,结束时间：=1615454543615,新增属性耗时：1527
2021-03-11 17:22:23.615 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.615 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.616 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.616 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.616 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.616 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.619 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.619 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.620 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.626  INFO 38652 --- [io-8101-exec-17] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542156,结束时间：=1615454543626,新增属性耗时：1470
2021-03-11 17:22:23.626  INFO 38652 --- [io-8101-exec-44] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542107,结束时间：=1615454543626,新增属性耗时：1519
2021-03-11 17:22:23.626  INFO 38652 --- [io-8101-exec-31] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542126,结束时间：=1615454543626,新增属性耗时：1500
2021-03-11 17:22:23.626 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.626 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.644 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.644 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.645 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:23.645 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.645 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.645 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:23.656 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.657 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:23.657 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.665 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.665 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.665 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3010(String), qq_test_3010(String), qq_test_3010(String)
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3011(String), qq_test_3011(String), qq_test_3011(String)
2021-03-11 17:22:23.665 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3009(String), qq_test_3009(String), qq_test_3009(String)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.686 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.687 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.687 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.687 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.710 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.710 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.710 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3012(String), qq_test_3012(String), qq_test_3012(String)
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:23.725 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.725 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.725 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:23.725 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.725 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.726 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:23.726 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3014(String), qq_test_3014(String), qq_test_3014(String)
2021-03-11 17:22:23.726 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3013(String), qq_test_3013(String), qq_test_3013(String)
2021-03-11 17:22:23.726 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3015(String), qq_test_3015(String), qq_test_3015(String)
2021-03-11 17:22:23.974 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:23.974 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:23.974 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383096579624960(Long)
2021-03-11 17:22:23.983 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:23.983 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:23.984 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383096579624960(Long)
2021-03-11 17:22:24.006 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.006 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.006 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383099339476992(Long), 4134383096579624960(Long), 2021-03-11 17:22:24.006(Timestamp), 999(Integer)
2021-03-11 17:22:24.066 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.066 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.066 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.080 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.080 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.080 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383096579624960(Long), 4133627517309423616(Long), qq_test_3008(String), qq_test_3008(String), RW(String), 4(String), 2021-03-11 17:22:24.066(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.098 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.098 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.098 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3010(String)
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3013(String)
2021-03-11 17:22:24.105 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-213" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:24.192 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.192 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.192 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3009(String)
2021-03-11 17:22:24.201 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.201 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.201 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3011(String)
2021-03-11 17:22:24.215 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.215 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.216 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3012(String)
2021-03-11 17:22:24.234  INFO 38652 --- [io-8101-exec-14] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542167,结束时间：=1615454544234,新增属性耗时：2067
2021-03-11 17:22:24.254 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:24.254 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:24.262 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:24.262 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:24.262 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:24.298 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:24.298 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.298 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.312 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:24.312 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.312 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.320 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.320 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.320 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3016(String), qq_test_3016(String), qq_test_3016(String)
2021-03-11 17:22:24.354 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.354 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.354 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3015(String)
2021-03-11 17:22:24.489 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.489 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.489 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097703698432(Long)
2021-03-11 17:22:24.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.513 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097703698432(Long)
2021-03-11 17:22:24.553 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.553 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.553 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383101633761280(Long), 4134383097703698432(Long), 2021-03-11 17:22:24.553(Timestamp), 999(Integer)
2021-03-11 17:22:24.581 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.581 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.581 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3014(String)
2021-03-11 17:22:24.619 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.619 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.619 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.626 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.626 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.626 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097703698432(Long), 4133627517309423616(Long), qq_test_3010(String), qq_test_3010(String), RW(String), 4(String), 2021-03-11 17:22:24.619(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.658 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.659 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.659 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097871470593(Long)
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.668 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097871470593(Long)
2021-03-11 17:22:24.688 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.688 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.688 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:24.688 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383102199992320(Long), 4134383097871470593(Long), 2021-03-11 17:22:24.688(Timestamp), 999(Integer)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:24.700 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.700 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.700 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.708 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.708 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.708 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097871470593(Long), 4133627517309423616(Long), qq_test_3013(String), qq_test_3013(String), RW(String), 4(String), 2021-03-11 17:22:24.7(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.717 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.725 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-214" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-215" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:24.768 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.768 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.768 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097703698433(Long)
2021-03-11 17:22:24.770 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:24.771 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.771 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3016(String)
2021-03-11 17:22:24.775 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.776 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.776 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097703698433(Long)
2021-03-11 17:22:24.795 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.795 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.796 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383102648782848(Long), 4134383097703698433(Long), 2021-03-11 17:22:24.795(Timestamp), 999(Integer)
2021-03-11 17:22:24.803 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.803 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.803 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097716281344(Long)
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.813 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097716281344(Long)
2021-03-11 17:22:24.820  INFO 38652 --- [io-8101-exec-38] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542188,结束时间：=1615454544820,新增属性耗时：2632
2021-03-11 17:22:24.820 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.820 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.821 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097703698433(Long), 4133627517309423616(Long), qq_test_3009(String), qq_test_3009(String), RW(String), 4(String), 2021-03-11 17:22:24.813(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.829 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.829 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:24.830 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:24.830 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.830 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383102795583488(Long), 4134383097716281344(Long), 2021-03-11 17:22:24.83(Timestamp), 999(Integer)
2021-03-11 17:22:24.839 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.839 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:24.839 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.839 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.839 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:24.840 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:24.850 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.851 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.851 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.851 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:24.854  INFO 38652 --- [io-8101-exec-18] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542215,结束时间：=1615454544854,新增属性耗时：2639
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:24.858 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.858 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.858 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097716281344(Long), 4133627517309423616(Long), qq_test_3011(String), qq_test_3011(String), RW(String), 4(String), 2021-03-11 17:22:24.851(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.860 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:24.860 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.860 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.863 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:24.863 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:24.868 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.868 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.868 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097825333248(Long)
2021-03-11 17:22:24.872 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:24.872 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:24.872 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-216" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:24.879 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:24.879 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.879 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.884 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.884 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.884 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.888 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:24.888 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.888 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.888 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.888 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.888 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097825333248(Long)
2021-03-11 17:22:24.892 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.892 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.893 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3017(String), qq_test_3017(String), qq_test_3017(String)
2021-03-11 17:22:24.893 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:24.902 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:24.902 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.902 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.905 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.905 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.905 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383103110156288(Long), 4134383097825333248(Long), 2021-03-11 17:22:24.905(Timestamp), 999(Integer)
2021-03-11 17:22:24.909 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:24.909 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.910 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:24.910 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097871470592(Long)
2021-03-11 17:22:24.910 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:24.910 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3018(String), qq_test_3018(String), qq_test_3018(String)
Exception in thread "Thread-217" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:24.949 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.950 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:24.950 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.957 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:24.957 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:24.957 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097871470592(Long)
2021-03-11 17:22:24.962 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:24.962 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:24.963 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097825333248(Long), 4133627517309423616(Long), qq_test_3012(String), qq_test_3012(String), RW(String), 4(String), 2021-03-11 17:22:24.95(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:24.977 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:24.977 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:24.977 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383103412146176(Long), 4134383097871470592(Long), 2021-03-11 17:22:24.977(Timestamp), 999(Integer)
2021-03-11 17:22:24.987 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:24.987 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:24.987 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:24.995 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:25.005 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.005 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.005 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.015 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.015 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:25.015 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097871470592(Long), 4133627517309423616(Long), qq_test_3014(String), qq_test_3014(String), RW(String), 4(String), 2021-03-11 17:22:25.005(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:25.027 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:25.028 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:25.028 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383097871470594(Long)
2021-03-11 17:22:25.039 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:25.039 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:25.039 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383097871470594(Long)
2021-03-11 17:22:25.041 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.041 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.041  INFO 38652 --- [io-8101-exec-41] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542178,结束时间：=1615454545041,新增属性耗时：2863
2021-03-11 17:22:25.041 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.055 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.055 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.060 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.073 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383103814799361(Long), 4134383097871470594(Long), 2021-03-11 17:22:25.073(Timestamp), 999(Integer)
2021-03-11 17:22:25.091 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.091 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.091 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.092  INFO 38652 --- [io-8101-exec-47] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542198,结束时间：=1615454545092,新增属性耗时：2894
2021-03-11 17:22:25.099 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.099 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.099 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.099 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.099 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-218" Exception in thread "Thread-219" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:25.109 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.109 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.109 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.114 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.114 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.114 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:25.114 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.114 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.115 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383097871470594(Long), 4133627517309423616(Long), qq_test_3015(String), qq_test_3015(String), RW(String), 4(String), 2021-03-11 17:22:25.099(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:25.122 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.122 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.122 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3019(String), qq_test_3019(String), qq_test_3019(String)
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.131 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383100413218816(Long)
2021-03-11 17:22:25.137 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.137 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.138 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.141 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.141 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.141 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.144 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:25.144 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:25.144 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383100413218816(Long)
2021-03-11 17:22:25.150 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.151 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.151 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3020(String), qq_test_3020(String), qq_test_3020(String)
2021-03-11 17:22:25.158 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:25.165 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:25.165  INFO 38652 --- [nio-8101-exec-5] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542206,结束时间：=1615454545165,新增属性耗时：2959
2021-03-11 17:22:25.165 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:25.165 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383104200675328(Long), 4134383100413218816(Long), 2021-03-11 17:22:25.165(Timestamp), 999(Integer)
2021-03-11 17:22:25.179 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.179 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.183 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.183 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.183 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-220" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:25.189 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.189 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.189 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.194 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.195 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:25.195 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383100413218816(Long), 4133627517309423616(Long), qq_test_3016(String), qq_test_3016(String), RW(String), 4(String), 2021-03-11 17:22:25.183(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:25.206 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.206 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.206 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.207 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.207 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.207 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3017(String)
2021-03-11 17:22:25.217 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.217 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.217 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.220 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.220 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.220 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.224 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.224 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.224 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.224 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3021(String), qq_test_3021(String), qq_test_3021(String)
2021-03-11 17:22:25.229 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.229 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.229 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3018(String)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:25.241  INFO 38652 --- [io-8101-exec-32] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542225,结束时间：=1615454545241,新增属性耗时：3016
Exception in thread "Thread-221" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:25.254 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.254 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.268 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.268 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.268 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.281 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.281 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.281 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.295 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.295 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.295 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.299  INFO 38652 --- [io-8101-exec-36] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542235,结束时间：=1615454545299,新增属性耗时：3064
2021-03-11 17:22:25.305 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.305 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.306 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.306 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.306 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3022(String), qq_test_3022(String), qq_test_3022(String)
2021-03-11 17:22:25.309 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.309 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.309 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.326 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.326 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.326 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.354 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.354 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.354 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.364 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.364  INFO 38652 --- [io-8101-exec-50] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542245,结束时间：=1615454545364,新增属性耗时：3119
2021-03-11 17:22:25.365 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.365 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3023(String), qq_test_3023(String), qq_test_3023(String)
2021-03-11 17:22:25.375 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:25.375 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:25.393 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:25.393 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:25.393 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:25.407 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:25.407 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.407 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.417 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:25.417 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.417 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.429 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.429 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.429 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3024(String), qq_test_3024(String), qq_test_3024(String)
2021-03-11 17:22:25.684 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.684 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.684 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3022(String)
2021-03-11 17:22:25.736 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.736 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.736 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3021(String)
2021-03-11 17:22:25.759 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:25.759 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:25.759 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383102971744256(Long)
2021-03-11 17:22:25.771 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:25.771 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:25.771 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383102971744256(Long)
2021-03-11 17:22:25.774 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.774 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.774 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3019(String)
2021-03-11 17:22:25.786 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:25.787 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:25.787 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383106809532416(Long), 4134383102971744256(Long), 2021-03-11 17:22:25.787(Timestamp), 999(Integer)
2021-03-11 17:22:25.795 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:25.795 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:25.795 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383102833332224(Long)
2021-03-11 17:22:25.796 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:25.796 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:25.796 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3020(String)
2021-03-11 17:22:25.806 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.806 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.806 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.817 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.818 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:25.818 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383102971744256(Long), 4133627517309423616(Long), qq_test_3018(String), qq_test_3018(String), RW(String), 4(String), 2021-03-11 17:22:25.806(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:25.818 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:25.818 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:25.818 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383102833332224(Long)
2021-03-11 17:22:25.834 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:25.834 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:25.834 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383107006664704(Long), 4134383102833332224(Long), 2021-03-11 17:22:25.834(Timestamp), 999(Integer)
2021-03-11 17:22:25.847 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.847 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.847 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.855 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.855 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:25.855 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.861 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:25.866 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:25.867 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:25.867 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383102833332224(Long), 4133627517309423616(Long), qq_test_3017(String), qq_test_3017(String), RW(String), 4(String), 2021-03-11 17:22:25.855(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:25.879 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:25.880 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:25.880 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:25.890 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-222" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-223" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.091  INFO 38652 --- [io-8101-exec-13] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542256,结束时间：=1615454546091,新增属性耗时：3835
2021-03-11 17:22:26.099 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.099 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:26.103  INFO 38652 --- [io-8101-exec-34] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542266,结束时间：=1615454546103,新增属性耗时：3837
2021-03-11 17:22:26.103 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:26.103 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.104 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3023(String)
2021-03-11 17:22:26.111 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.111 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.111 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383104632688640(Long)
2021-03-11 17:22:26.115 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.115 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:26.118 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.118 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.118 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.120 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.120 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.120 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383104632688640(Long)
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3024(String)
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.123 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.137 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.137 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.137 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.139 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.140 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.140 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383108290121728(Long), 4134383104632688640(Long), 2021-03-11 17:22:26.14(Timestamp), 999(Integer)
2021-03-11 17:22:26.152 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.152 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.152 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.158 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.158 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.158 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3025(String), qq_test_3025(String), qq_test_3025(String)
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.164 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.164 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.164 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383104301338624(Long)
2021-03-11 17:22:26.164 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.168 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.168 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:26.169 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383104632688640(Long), 4133627517309423616(Long), qq_test_3022(String), qq_test_3022(String), RW(String), 4(String), 2021-03-11 17:22:26.164(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:26.179 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.179 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.179 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383104301338624(Long)
2021-03-11 17:22:26.184 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.184 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.184 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.191 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.191 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.191 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3026(String), qq_test_3026(String), qq_test_3026(String)
2021-03-11 17:22:26.198 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.198 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.199 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383108533391360(Long), 4134383104301338624(Long), 2021-03-11 17:22:26.198(Timestamp), 999(Integer)
2021-03-11 17:22:26.212 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.212 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.212 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.217 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.217 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.217 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.217 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.217 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:26.217 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383104301338624(Long), 4133627517309423616(Long), qq_test_3021(String), qq_test_3021(String), RW(String), 4(String), 2021-03-11 17:22:26.212(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:26.225 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:26.232 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.232 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.232 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.238 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-224" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-225" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.379 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.379 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.379 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383103986765824(Long)
2021-03-11 17:22:26.388 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.389 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.389 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383103986765824(Long)
2021-03-11 17:22:26.407 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.408 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.408 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383109414195200(Long), 4134383103986765824(Long), 2021-03-11 17:22:26.408(Timestamp), 999(Integer)
2021-03-11 17:22:26.421 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.421 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.421 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.427 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.427 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:26.428 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383103986765824(Long), 4133627517309423616(Long), qq_test_3020(String), qq_test_3020(String), RW(String), 4(String), 2021-03-11 17:22:26.421(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.457 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383103814799360(Long)
2021-03-11 17:22:26.462 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.462 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.462 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383103814799360(Long)
2021-03-11 17:22:26.470 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:26.486 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.486  INFO 38652 --- [io-8101-exec-12] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542306,结束时间：=1615454546486,新增属性耗时：4180
2021-03-11 17:22:26.486  INFO 38652 --- [nio-8101-exec-7] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542296,结束时间：=1615454546486,新增属性耗时：4190
2021-03-11 17:22:26.486 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.486 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383109741350912(Long), 4134383103814799360(Long), 2021-03-11 17:22:26.486(Timestamp), 999(Integer)
2021-03-11 17:22:26.495 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.495 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.495 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:26.495 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
Exception in thread "Thread-226" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.503 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.503 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.503 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.514 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.518 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.518 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.518 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.530 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.531 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.531 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.536 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383103814799360(Long), 4133627517309423616(Long), qq_test_3019(String), qq_test_3019(String), RW(String), 4(String), 2021-03-11 17:22:26.514(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3028(String), qq_test_3028(String), qq_test_3028(String)
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383105156976640(Long)
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.550 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.560 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383105156976640(Long)
2021-03-11 17:22:26.564 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.564 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.564 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3027(String), qq_test_3027(String), qq_test_3027(String)
2021-03-11 17:22:26.571 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:26.576 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.576 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.577 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383110118838272(Long), 4134383105156976640(Long), 2021-03-11 17:22:26.576(Timestamp), 999(Integer)
2021-03-11 17:22:26.585 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:26.585 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.585 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3025(String)
2021-03-11 17:22:26.595 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.595  INFO 38652 --- [io-8101-exec-23] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542286,结束时间：=1615454546595,新增属性耗时：4309
2021-03-11 17:22:26.595 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.595 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.607 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.607 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.607 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:26.607 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
Exception in thread "Thread-227" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
2021-03-11 17:22:26.607 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383105156976640(Long), 4133627517309423616(Long), qq_test_3024(String), qq_test_3024(String), RW(String), 4(String), 2021-03-11 17:22:26.595(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.629 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.630 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:26.630 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.630 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3026(String)
2021-03-11 17:22:26.630 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.630 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.649 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.649 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.649 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383104804655104(Long)
2021-03-11 17:22:26.660 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.665 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:26.682 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:26.682 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:26.682 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383104804655104(Long)
2021-03-11 17:22:26.682 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.683 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.683 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.693 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.693 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.694 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3029(String), qq_test_3029(String), qq_test_3029(String)
2021-03-11 17:22:26.708 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:26.708 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:26.708 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383110672486400(Long), 4134383104804655104(Long), 2021-03-11 17:22:26.708(Timestamp), 999(Integer)
Exception in thread "Thread-228" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.737 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.737  INFO 38652 --- [io-8101-exec-40] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542276,结束时间：=1615454546737,新增属性耗时：4461
2021-03-11 17:22:26.737 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.737 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.745 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.745 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:26.753 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.753 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:26.754 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383104804655104(Long), 4133627517309423616(Long), qq_test_3023(String), qq_test_3023(String), RW(String), 4(String), 2021-03-11 17:22:26.737(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:26.765 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.765 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.765 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:26.786 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.786 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.786 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.793 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:26.793 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.793 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.800 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.800 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.800 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.808  INFO 38652 --- [io-8101-exec-20] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542327,结束时间：=1615454546808,新增属性耗时：4481
2021-03-11 17:22:26.815 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.815 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.815 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3030(String), qq_test_3030(String), qq_test_3030(String)
2021-03-11 17:22:26.815 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.819 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:26.819 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:26.830 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:26.830 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:26.830 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-229" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:26.880 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:26.881 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:26.881 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.894 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:26.894 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:26.894 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:26.902 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:26.902 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:26.903 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3031(String), qq_test_3031(String), qq_test_3031(String)
2021-03-11 17:22:27.027 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.027 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.027 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383108218818560(Long)
2021-03-11 17:22:27.031  INFO 38652 --- [io-8101-exec-19] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542317,结束时间：=1615454547031,新增属性耗时：4714
2021-03-11 17:22:27.038 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.038 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:27.038 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:27.038 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.039 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383108218818560(Long)
2021-03-11 17:22:27.044 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.044 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.044 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3028(String)
2021-03-11 17:22:27.048 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:27.048 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:27.048 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:27.067 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.067 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.067 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383112178241536(Long), 4134383108218818560(Long), 2021-03-11 17:22:27.067(Timestamp), 999(Integer)
2021-03-11 17:22:27.073 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:27.073 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.073 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.087 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.095 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.095 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.095 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3032(String), qq_test_3032(String), qq_test_3032(String)
2021-03-11 17:22:27.100 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.101 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.101 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383108218818560(Long), 4133627517309423616(Long), qq_test_3026(String), qq_test_3026(String), RW(String), 4(String), 2021-03-11 17:22:27.087(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:27.144 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.144 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.144 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.168 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:27.196 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.196 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.196 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3027(String)
2021-03-11 17:22:27.265 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.265 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.265 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3029(String)
2021-03-11 17:22:27.284 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.284 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.284 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383108197847040(Long)
2021-03-11 17:22:27.290 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.290 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.290 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383108197847040(Long)
2021-03-11 17:22:27.305 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.305 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.305 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383113176485888(Long), 4134383108197847040(Long), 2021-03-11 17:22:27.305(Timestamp), 999(Integer)
2021-03-11 17:22:27.328 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.328 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.328 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.334 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.335 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.335 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383108197847040(Long), 4133627517309423616(Long), qq_test_3025(String), qq_test_3025(String), RW(String), 4(String), 2021-03-11 17:22:27.328(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:27.347 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.347 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.347 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-230" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:27.359 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-231" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:27.395 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.395 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.395 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3030(String)
2021-03-11 17:22:27.421  INFO 38652 --- [io-8101-exec-10] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542346,结束时间：=1615454547421,新增属性耗时：5075
2021-03-11 17:22:27.433 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:27.433 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:27.438 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.438 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.438 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383109812654080(Long)
2021-03-11 17:22:27.445 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:27.445 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:27.445 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:27.450 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.450 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.450 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383109812654080(Long)
2021-03-11 17:22:27.454 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.454 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.454 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3031(String)
2021-03-11 17:22:27.465 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:27.465 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.465 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.469  INFO 38652 --- [io-8101-exec-49] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542336,结束时间：=1615454547469,新增属性耗时：5133
2021-03-11 17:22:27.473 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.473 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.473 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383113881128960(Long), 4134383109812654080(Long), 2021-03-11 17:22:27.473(Timestamp), 999(Integer)
2021-03-11 17:22:27.478 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:27.478 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:27.478 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:27.478 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.478 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.490 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.490 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.490 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3033(String), qq_test_3033(String), qq_test_3033(String)
2021-03-11 17:22:27.491 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:27.492 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:27.492 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:27.493 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.493 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.493 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.505 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.505 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.505 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383109812654080(Long), 4133627517309423616(Long), qq_test_3028(String), qq_test_3028(String), RW(String), 4(String), 2021-03-11 17:22:27.493(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:27.507 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:27.508 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.508 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:27.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.528 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.529 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.529 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.529 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.529 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.529 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3034(String), qq_test_3034(String), qq_test_3034(String)
2021-03-11 17:22:27.536 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:27.564 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.564 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.564 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3032(String)
Exception in thread "Thread-232" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:27.676 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.676 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.676 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383109858791424(Long)
2021-03-11 17:22:27.685  INFO 38652 --- [io-8101-exec-37] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542367,结束时间：=1615454547685,新增属性耗时：5318
2021-03-11 17:22:27.685 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.685 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.685 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383109858791424(Long)
2021-03-11 17:22:27.695 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:27.695 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:27.704 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.704 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.704 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383110345330688(Long)
2021-03-11 17:22:27.711 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:27.711 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:27.711 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:27.715 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.715 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.715 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383114896150528(Long), 4134383109858791424(Long), 2021-03-11 17:22:27.715(Timestamp), 999(Integer)
2021-03-11 17:22:27.718 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.719 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.719 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383110345330688(Long)
2021-03-11 17:22:27.734 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:27.734 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.734 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.757 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383115072311296(Long), 4134383110345330688(Long), 2021-03-11 17:22:27.757(Timestamp), 999(Integer)
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383110911561728(Long)
2021-03-11 17:22:27.769 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3035(String), qq_test_3035(String), qq_test_3035(String)
2021-03-11 17:22:27.777 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.777 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.777 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.783 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383110911561728(Long)
2021-03-11 17:22:27.792 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.792 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.792 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.792 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.793 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383110345330688(Long), 4133627517309423616(Long), qq_test_3029(String), qq_test_3029(String), RW(String), 4(String), 2021-03-11 17:22:27.783(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:27.793 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383109858791424(Long), 4133627517309423616(Long), qq_test_3027(String), qq_test_3027(String), RW(String), 4(String), 2021-03-11 17:22:27.777(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:27.802 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:27.802 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:27.803 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383115261054976(Long), 4134383110911561728(Long), 2021-03-11 17:22:27.802(Timestamp), 999(Integer)
2021-03-11 17:22:27.828 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.829 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.829 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.829 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.829 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.829 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.836 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:27.839 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:27.844 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.844 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:27.844 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:27.860 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:27.860 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:27.861 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383110911561728(Long), 4133627517309423616(Long), qq_test_3030(String), qq_test_3030(String), RW(String), 4(String), 2021-03-11 17:22:27.844(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-233" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-234" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:27.886 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:27.886 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:27.886 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:27.899 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-235" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:27.979 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:27.979 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:27.979 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3033(String)
2021-03-11 17:22:28.001  INFO 38652 --- [io-8101-exec-15] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542377,结束时间：=1615454548001,新增属性耗时：5624
2021-03-11 17:22:28.002  INFO 38652 --- [io-8101-exec-39] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542356,结束时间：=1615454548002,新增属性耗时：5646
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3035(String)
2021-03-11 17:22:28.005 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.013 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.013 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.014 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.014 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.014 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.014 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.036 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.036 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.036 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.050 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.050 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.050 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.055 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.055 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.055 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.065 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.066 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.066 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3037(String), qq_test_3037(String), qq_test_3037(String)
2021-03-11 17:22:28.068 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.068 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.068 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383111184191488(Long)
2021-03-11 17:22:28.068 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.068 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.068 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.077 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.077 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.077 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383111184191488(Long)
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3036(String), qq_test_3036(String), qq_test_3036(String)
2021-03-11 17:22:28.077 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3034(String)
2021-03-11 17:22:28.094  INFO 38652 --- [io-8101-exec-45] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542387,结束时间：=1615454548094,新增属性耗时：5707
2021-03-11 17:22:28.099 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:28.099 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.099 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.099 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:28.100 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383116506763264(Long), 4134383111184191488(Long), 2021-03-11 17:22:28.099(Timestamp), 999(Integer)
2021-03-11 17:22:28.116 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.116 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.116 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.125 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.125 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.125 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.125 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.125 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.125 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383112098549760(Long)
2021-03-11 17:22:28.132 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.132 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.132 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.140 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.140 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.140 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.140 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383112098549760(Long)
2021-03-11 17:22:28.140 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:28.141 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383111184191488(Long), 4133627517309423616(Long), qq_test_3031(String), qq_test_3031(String), RW(String), 4(String), 2021-03-11 17:22:28.125(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:28.143 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.143 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.143 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.154 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.154 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.154 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3038(String), qq_test_3038(String), qq_test_3038(String)
2021-03-11 17:22:28.164 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.164 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.164 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.167 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:28.167 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:28.167 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383116791975936(Long), 4134383112098549760(Long), 2021-03-11 17:22:28.167(Timestamp), 999(Integer)
2021-03-11 17:22:28.183 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:28.193 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.193 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.193 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.204 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.204 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:28.204 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383112098549760(Long), 4133627517309423616(Long), qq_test_3032(String), qq_test_3032(String), RW(String), 4(String), 2021-03-11 17:22:28.193(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-236" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:28.230 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.230 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.230 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.240 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-237" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:28.458  INFO 38652 --- [nio-8101-exec-8] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542397,结束时间：=1615454548458,新增属性耗时：6061
2021-03-11 17:22:28.458  INFO 38652 --- [io-8101-exec-16] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542407,结束时间：=1615454548458,新增属性耗时：6051
2021-03-11 17:22:28.466 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.466 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.468 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.468 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.479 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.479 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.479 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.479 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.479 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3038(String)
2021-03-11 17:22:28.479 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.480 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.480 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.480 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.499 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.499 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.499 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.503 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.503 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.503 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.509 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.509 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.509 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383114879373312(Long)
2021-03-11 17:22:28.512 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.513 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.513 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.516 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.516 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.516 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.521 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.521 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383114879373312(Long)
2021-03-11 17:22:28.521 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3039(String), qq_test_3039(String), qq_test_3039(String)
2021-03-11 17:22:28.521 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3040(String), qq_test_3040(String), qq_test_3040(String)
2021-03-11 17:22:28.553 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:28.553 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:28.554 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383118410977280(Long), 4134383114879373312(Long), 2021-03-11 17:22:28.553(Timestamp), 999(Integer)
2021-03-11 17:22:28.577 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.578 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.578 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.585 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.585 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:28.585 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383114879373312(Long), 4133627517309423616(Long), qq_test_3035(String), qq_test_3035(String), RW(String), 4(String), 2021-03-11 17:22:28.577(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:28.594 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.594 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.594 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3036(String)
2021-03-11 17:22:28.605 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.605 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.605 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.613 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.613 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.613 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383113763688448(Long)
2021-03-11 17:22:28.620 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3037(String)
2021-03-11 17:22:28.626 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383113763688448(Long)
2021-03-11 17:22:28.632 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.632 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.632 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383113956626432(Long)
2021-03-11 17:22:28.645 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.645 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.645 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383113956626432(Long)
2021-03-11 17:22:28.648 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:28.649 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:28.649 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383118809436160(Long), 4134383113763688448(Long), 2021-03-11 17:22:28.648(Timestamp), 999(Integer)
Exception in thread "Thread-238" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:28.673 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:28.673 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:28.673 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383118914293760(Long), 4134383113956626432(Long), 2021-03-11 17:22:28.673(Timestamp), 999(Integer)
2021-03-11 17:22:28.681 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.681 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.681 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.695 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.695 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.695 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.695 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.695 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:28.696 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383113763688448(Long), 4133627517309423616(Long), qq_test_3033(String), qq_test_3033(String), RW(String), 4(String), 2021-03-11 17:22:28.681(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:28.702 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.702 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:28.702 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383113956626432(Long), 4133627517309423616(Long), qq_test_3034(String), qq_test_3034(String), RW(String), 4(String), 2021-03-11 17:22:28.695(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:28.720 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.720 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.720 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.726 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:28.726 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.726 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.737 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:28.745 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-239" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-240" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:28.799 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.800 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.800 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3039(String)
2021-03-11 17:22:28.806  INFO 38652 --- [io-8101-exec-27] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542437,结束时间：=1615454548806,新增属性耗时：6369
2021-03-11 17:22:28.816 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.816 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.826 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.826 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.826 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.838 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.838  INFO 38652 --- [io-8101-exec-33] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542417,结束时间：=1615454548838,新增属性耗时：6421
2021-03-11 17:22:28.838  INFO 38652 --- [io-8101-exec-29] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542428,结束时间：=1615454548838,新增属性耗时：6410
2021-03-11 17:22:28.838 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.838 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.853 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3041(String), qq_test_3041(String), qq_test_3041(String)
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:28.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:28.873 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.873 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.873 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.875 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:28.875 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:28.875 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.881 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3043(String), qq_test_3043(String), qq_test_3043(String)
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.893 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3042(String), qq_test_3042(String), qq_test_3042(String)
2021-03-11 17:22:28.899 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:28.899 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:28.899 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3040(String)
2021-03-11 17:22:28.978 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:28.978 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:28.978 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383116578066432(Long)
2021-03-11 17:22:28.986 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:28.986 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:28.986 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383116578066432(Long)
2021-03-11 17:22:29.008 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.009 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.009 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383120319385600(Long), 4134383116578066432(Long), 2021-03-11 17:22:29.008(Timestamp), 999(Integer)
2021-03-11 17:22:29.024 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.024 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.024 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.034 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.034 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.034 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383116578066432(Long), 4133627517309423616(Long), qq_test_3038(String), qq_test_3038(String), RW(String), 4(String), 2021-03-11 17:22:29.024(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.059 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.059 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.059 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.070 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-241" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.119 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.119 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.119 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383116146053120(Long)
2021-03-11 17:22:29.130 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.130 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.130 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383116146053120(Long)
2021-03-11 17:22:29.140 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.141 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.141 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383120877228032(Long), 4134383116146053120(Long), 2021-03-11 17:22:29.141(Timestamp), 999(Integer)
2021-03-11 17:22:29.149 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.149 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.150 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.160 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.160 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.160 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383116146053120(Long), 4133627517309423616(Long), qq_test_3036(String), qq_test_3036(String), RW(String), 4(String), 2021-03-11 17:22:29.149(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.184 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.185 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.185 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.185 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.185 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.185 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383116150247424(Long)
2021-03-11 17:22:29.196 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.197 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.197 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383116150247424(Long)
2021-03-11 17:22:29.197 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.221 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.222 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.222 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383121216966656(Long), 4134383116150247424(Long), 2021-03-11 17:22:29.222(Timestamp), 999(Integer)
Exception in thread "Thread-242" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.234 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.235 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.235 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3041(String)
2021-03-11 17:22:29.242 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.242 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.242 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.249 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.249 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.249 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383116150247424(Long), 4133627517309423616(Long), qq_test_3037(String), qq_test_3037(String), RW(String), 4(String), 2021-03-11 17:22:29.242(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.268 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.268 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.268 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.280 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.280 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.280 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383118100598785(Long)
2021-03-11 17:22:29.281 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.291 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.291 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.291 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383118100598785(Long)
2021-03-11 17:22:29.307  INFO 38652 --- [nio-8101-exec-6] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542468,结束时间：=1615454549307,新增属性耗时：6839
2021-03-11 17:22:29.310 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.310 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.310 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3042(String)
Exception in thread "Thread-243" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.318 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.318 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.319 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.319 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.319 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383121619619840(Long), 4134383118100598785(Long), 2021-03-11 17:22:29.318(Timestamp), 999(Integer)
2021-03-11 17:22:29.324 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.324 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.324 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:29.328 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.328 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.328 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.335 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.335 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.335 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.336 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.336 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.336 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383118100598785(Long), 4133627517309423616(Long), qq_test_3040(String), qq_test_3040(String), RW(String), 4(String), 2021-03-11 17:22:29.328(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.350 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.350 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.350 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.351 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.352 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.352 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3043(String)
2021-03-11 17:22:29.355 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.356  INFO 38652 --- [io-8101-exec-48] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542445,结束时间：=1615454549356,新增属性耗时：6911
2021-03-11 17:22:29.356 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.356 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.362 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.362 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.362 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3044(String), qq_test_3044(String), qq_test_3044(String)
2021-03-11 17:22:29.363 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.363 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.365 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.372 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.372 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.372 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:29.394 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.394 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.394 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.406 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.406 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.406 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-244" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.415 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.415 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.415 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383118100598784(Long)
2021-03-11 17:22:29.422 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.422 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.422 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.422 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.422 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383118100598784(Long)
2021-03-11 17:22:29.422 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3045(String), qq_test_3045(String), qq_test_3045(String)
2021-03-11 17:22:29.440 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.440 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.440 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383122131324928(Long), 4134383118100598784(Long), 2021-03-11 17:22:29.44(Timestamp), 999(Integer)
2021-03-11 17:22:29.467 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.467 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.468 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.468 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.468 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383119556022272(Long)
2021-03-11 17:22:29.468 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.475 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.475 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.475 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.475 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.475 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383119556022272(Long)
2021-03-11 17:22:29.475 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383118100598784(Long), 4133627517309423616(Long), qq_test_3039(String), qq_test_3039(String), RW(String), 4(String), 2021-03-11 17:22:29.467(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.502 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.502 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.502 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.502 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.502 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.502 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383122391371776(Long), 4134383119556022272(Long), 2021-03-11 17:22:29.502(Timestamp), 999(Integer)
2021-03-11 17:22:29.515 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.522 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.522 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.522 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.530  INFO 38652 --- [io-8101-exec-42] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542455,结束时间：=1615454549530,新增属性耗时：7075
2021-03-11 17:22:29.530 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.531 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.531 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383119556022272(Long), 4133627517309423616(Long), qq_test_3041(String), qq_test_3041(String), RW(String), 4(String), 2021-03-11 17:22:29.522(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.540 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.540 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.549 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.549 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.549 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.550 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.550 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.550 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-245" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.561 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.563 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.563 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.563 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.570 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.570 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.570 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.583 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.583 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.584 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3046(String), qq_test_3046(String), qq_test_3046(String)
Exception in thread "Thread-246" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.647 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.647 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.647 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383119698628608(Long)
2021-03-11 17:22:29.661 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.661 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.661 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383119698628608(Long)
2021-03-11 17:22:29.680  INFO 38652 --- [io-8101-exec-35] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542486,结束时间：=1615454549680,新增属性耗时：7194
2021-03-11 17:22:29.683 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.683 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.684 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383123150540800(Long), 4134383119698628608(Long), 2021-03-11 17:22:29.683(Timestamp), 999(Integer)
2021-03-11 17:22:29.686  INFO 38652 --- [nio-8101-exec-9] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542478,结束时间：=1615454549686,新增属性耗时：7208
2021-03-11 17:22:29.694 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.694 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.702 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.702 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.707 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.707 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.707 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:29.712 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.713 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.713 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.719 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.719 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.719 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:29.724 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.724 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.724 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.730 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.730 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.731 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383119698628608(Long), 4133627517309423616(Long), qq_test_3042(String), qq_test_3042(String), RW(String), 4(String), 2021-03-11 17:22:29.712(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.735  INFO 38652 --- [io-8101-exec-21] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542498,结束时间：=1615454549735,新增属性耗时：7237
2021-03-11 17:22:29.742 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.742 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.742 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.743 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.743 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.743 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.748 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:29.748 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:29.749 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.750 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.750 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3047(String), qq_test_3047(String), qq_test_3047(String)
2021-03-11 17:22:29.750 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.750 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.750 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.753 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:29.753 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:29.754 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:29.758 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.758 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.758 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3048(String), qq_test_3048(String), qq_test_3048(String)
2021-03-11 17:22:29.775 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:29.775 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.775 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.785 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.785 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.785 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.794 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:29.794 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.794 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.796 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:29.801 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.801 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:29.801 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.801 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:29.801 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383119698628609(Long)
2021-03-11 17:22:29.801 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3044(String)
2021-03-11 17:22:29.803 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.803 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.803 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.803 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.803 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3045(String)
2021-03-11 17:22:29.803 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3049(String), qq_test_3049(String), qq_test_3049(String)
2021-03-11 17:22:29.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:29.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:29.807 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383119698628609(Long)
Exception in thread "Thread-247" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.824 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:29.824 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:29.824 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383123741937664(Long), 4134383119698628609(Long), 2021-03-11 17:22:29.824(Timestamp), 999(Integer)
2021-03-11 17:22:29.847 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.847 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:29.847 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:29.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:29.860 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383119698628609(Long), 4133627517309423616(Long), qq_test_3043(String), qq_test_3043(String), RW(String), 4(String), 2021-03-11 17:22:29.847(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:29.895 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:29.895 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:29.895 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:29.920 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-248" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:29.962 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:29.962 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:29.962 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3046(String)
2021-03-11 17:22:30.159 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.159 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.160 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.160 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.160 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3047(String)
2021-03-11 17:22:30.160 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383121644785664(Long)
2021-03-11 17:22:30.167 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.167 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.167 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383121644785664(Long)
2021-03-11 17:22:30.193 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.193  INFO 38652 --- [io-8101-exec-46] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542517,结束时间：=1615454550193,新增属性耗时：7676
2021-03-11 17:22:30.193  INFO 38652 --- [io-8101-exec-30] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542507,结束时间：=1615454550193,新增属性耗时：7686
2021-03-11 17:22:30.193 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.193 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.194 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383121846112256(Long)
2021-03-11 17:22:30.194 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.194 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383125293830144(Long), 4134383121644785664(Long), 2021-03-11 17:22:30.194(Timestamp), 999(Integer)
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.205 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.205 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.205 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383121846112256(Long)
2021-03-11 17:22:30.205 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3048(String)
2021-03-11 17:22:30.212 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.212 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.212 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.212 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.212 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.212 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.212 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:30.212 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.213 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:30.227 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.227 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.227 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.227 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.227 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.227 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.228 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.228 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383125432242176(Long), 4134383121846112256(Long), 2021-03-11 17:22:30.227(Timestamp), 999(Integer)
2021-03-11 17:22:30.228 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383121644785664(Long), 4133627517309423616(Long), qq_test_3044(String), qq_test_3044(String), RW(String), 4(String), 2021-03-11 17:22:30.212(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.238 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.238 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.238 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.238 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.238 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.238 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3049(String)
2021-03-11 17:22:30.246 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.246 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.246 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.249 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.249 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.249 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.249 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.249 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.249 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.250 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.250 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.250 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.254 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.254 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.254 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.254 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3051(String), qq_test_3051(String), qq_test_3051(String)
2021-03-11 17:22:30.254 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.255 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383121846112256(Long), 4133627517309423616(Long), qq_test_3045(String), qq_test_3045(String), RW(String), 4(String), 2021-03-11 17:22:30.249(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.257 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.257 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.257 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3050(String), qq_test_3050(String), qq_test_3050(String)
2021-03-11 17:22:30.257 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:30.294 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.294 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.294 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-249" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:30.302 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:30.361  INFO 38652 --- [nio-8101-exec-2] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542527,结束时间：=1615454550361,新增属性耗时：7834
Exception in thread "Thread-250" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:30.374 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.374 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.391 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.391 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.391 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:30.407 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.407 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.407 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.418 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.418 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.418 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.424 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.424 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.425 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3052(String), qq_test_3052(String), qq_test_3052(String)
2021-03-11 17:22:30.444  INFO 38652 --- [io-8101-exec-28] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542537,结束时间：=1615454550444,新增属性耗时：7907
2021-03-11 17:22:30.451 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.451 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.466 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:30.480 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.480 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.480 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.491 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.491 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.491 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.500 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.501 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.501 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3053(String), qq_test_3053(String), qq_test_3053(String)
2021-03-11 17:22:30.520 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.520 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.520 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383123251204096(Long)
2021-03-11 17:22:30.532 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.533 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.533 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383123251204096(Long)
2021-03-11 17:22:30.547 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.547 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.547 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383122588504064(Long)
2021-03-11 17:22:30.554 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.554 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.554 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383126803779584(Long), 4134383123251204096(Long), 2021-03-11 17:22:30.554(Timestamp), 999(Integer)
2021-03-11 17:22:30.558 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.558 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.558 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383122588504064(Long)
2021-03-11 17:22:30.575 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.575 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.575 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383126891859968(Long), 4134383122588504064(Long), 2021-03-11 17:22:30.575(Timestamp), 999(Integer)
2021-03-11 17:22:30.590 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.590 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.590 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.590 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.591 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.591 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.603 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.603 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.603 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383123251204096(Long), 4133627517309423616(Long), qq_test_3047(String), qq_test_3047(String), RW(String), 4(String), 2021-03-11 17:22:30.59(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.604 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.604 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.605 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383122588504064(Long), 4133627517309423616(Long), qq_test_3046(String), qq_test_3046(String), RW(String), 4(String), 2021-03-11 17:22:30.59(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.636 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.636 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.636 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.636 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.636 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.637 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.657 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.657 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-251" Exception in thread "Thread-252" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:30.696 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.696 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.696 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383123301535744(Long)
2021-03-11 17:22:30.706 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.707 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.707 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383123301535744(Long)
2021-03-11 17:22:30.731 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.731 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.731 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383127546171392(Long), 4134383123301535744(Long), 2021-03-11 17:22:30.731(Timestamp), 999(Integer)
2021-03-11 17:22:30.786 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.786 DEBUG 38652 --- [io-8101-exec-43] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.786 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.786 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.786 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.786 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3050(String)
2021-03-11 17:22:30.806 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.807 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.807 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383123301535744(Long), 4133627517309423616(Long), qq_test_3048(String), qq_test_3048(String), RW(String), 4(String), 2021-03-11 17:22:30.786(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.815 DEBUG 38652 --- [io-8101-exec-24] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.815 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.815 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3053(String)
2021-03-11 17:22:30.834  INFO 38652 --- [io-8101-exec-26] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542560,结束时间：=1615454550834,新增属性耗时：8274
2021-03-11 17:22:30.834  INFO 38652 --- [io-8101-exec-11] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542547,结束时间：=1615454550834,新增属性耗时：8287
2021-03-11 17:22:30.845 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.846 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.846 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.848 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.848 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.848 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:30.849 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:30.853 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:30.856 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:30.860 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:30.860 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:30.860 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383123444142080(Long)
2021-03-11 17:22:30.865 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:30.866 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:30.866 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383123444142080(Long)
2021-03-11 17:22:30.868 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.868 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.868 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.871 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:30.871 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.871 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.877 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:30.877 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:30.877 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383128158539776(Long), 4134383123444142080(Long), 2021-03-11 17:22:30.877(Timestamp), 999(Integer)
Exception in thread "Thread-253" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:30.878 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.878 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.878 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.881 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:30.881 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.881 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.883 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.883 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.883 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3055(String), qq_test_3055(String), qq_test_3055(String)
2021-03-11 17:22:30.903 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.903 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:30.903 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.904 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.904 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.904 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3054(String), qq_test_3054(String), qq_test_3054(String)
2021-03-11 17:22:30.910 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:30.910 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:30.911 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383123444142080(Long), 4133627517309423616(Long), qq_test_3049(String), qq_test_3049(String), RW(String), 4(String), 2021-03-11 17:22:30.903(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:30.927 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:30.927 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:30.927 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:30.936 DEBUG 38652 --- [io-8101-exec-22] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.937 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.937 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3051(String)
2021-03-11 17:22:30.937 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:30.955 DEBUG 38652 --- [nio-8101-exec-1] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:30.955 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:30.955 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3052(String)
Exception in thread "Thread-254" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:31.043  INFO 38652 --- [nio-8101-exec-4] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542568,结束时间：=1615454551043,新增属性耗时：8475
2021-03-11 17:22:31.064 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.064 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.084 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.085 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.085 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.098 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.099 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.099 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.109 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.110 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.110 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.115 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.115 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.115 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3056(String), qq_test_3056(String), qq_test_3056(String)
2021-03-11 17:22:31.124  INFO 38652 --- [nio-8101-exec-3] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454542577,结束时间：=1615454551124,新增属性耗时：8547
2021-03-11 17:22:31.133 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.133 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.152 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.153 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.153 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.171 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.171 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.171 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.179 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.179 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.179 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.183 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.183 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.183 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3057(String), qq_test_3057(String), qq_test_3057(String)
2021-03-11 17:22:31.267 DEBUG 38652 --- [io-8101-exec-22] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:31.267 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:31.268 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383125369327616(Long)
2021-03-11 17:22:31.272 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:31.272 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:31.272 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383125369327616(Long)
2021-03-11 17:22:31.296 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:31.296 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:31.296 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383129915953152(Long), 4134383125369327616(Long), 2021-03-11 17:22:31.296(Timestamp), 999(Integer)
2021-03-11 17:22:31.307 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.307 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.307 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.311 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.311 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:31.311 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383125369327616(Long), 4133627517309423616(Long), qq_test_3051(String), qq_test_3051(String), RW(String), 4(String), 2021-03-11 17:22:31.307(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:31.333 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.333 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.333 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.337 DEBUG 38652 --- [io-8101-exec-31] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:31.338 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.338 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3055(String)
2021-03-11 17:22:31.344 DEBUG 38652 --- [io-8101-exec-43] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:31.344 DEBUG 38652 --- [io-8101-exec-24] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:31.344 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:31.344 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:31.344 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383125369327617(Long)
2021-03-11 17:22:31.345 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383126434680832(Long)
2021-03-11 17:22:31.345 DEBUG 38652 --- [io-8101-exec-22] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383125369327617(Long)
2021-03-11 17:22:31.351 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383126434680832(Long)
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383130226331649(Long), 4134383126434680832(Long), 2021-03-11 17:22:31.37(Timestamp), 999(Integer)
2021-03-11 17:22:31.370 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383130226331648(Long), 4134383125369327617(Long), 2021-03-11 17:22:31.37(Timestamp), 999(Integer)
Exception in thread "Thread-255" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:31.385 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.386 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.386 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.392 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.392 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.392 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.395 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.395 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:31.396 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383126434680832(Long), 4133627517309423616(Long), qq_test_3053(String), qq_test_3053(String), RW(String), 4(String), 2021-03-11 17:22:31.386(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:31.408 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.408 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:31.409 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383125369327617(Long), 4133627517309423616(Long), qq_test_3050(String), qq_test_3050(String), RW(String), 4(String), 2021-03-11 17:22:31.392(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-25] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.413 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3054(String)
2021-03-11 17:22:31.420 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.421 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.421 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.425 DEBUG 38652 --- [io-8101-exec-24] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.427 DEBUG 38652 --- [io-8101-exec-43] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:31.455  INFO 38652 --- [io-8101-exec-22] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543612,结束时间：=1615454551455,新增属性耗时：7843
2021-03-11 17:22:31.455 DEBUG 38652 --- [nio-8101-exec-1] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:31.456 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:31.456 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383126120108032(Long)
Exception in thread "Thread-256" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-257" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:31.466 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:31.466 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.466 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.466 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:31.466 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383126120108032(Long)
2021-03-11 17:22:31.479 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.480 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.480 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.494 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:31.494 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.494 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.494 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.494 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:31.495 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383130746425344(Long), 4134383126120108032(Long), 2021-03-11 17:22:31.494(Timestamp), 999(Integer)
2021-03-11 17:22:31.508 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.508 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.508 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.519 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.519 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.519 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3058(String), qq_test_3058(String), qq_test_3058(String)
2021-03-11 17:22:31.541 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.541  INFO 38652 --- [io-8101-exec-24] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543614,结束时间：=1615454551541,新增属性耗时：7927
2021-03-11 17:22:31.541  INFO 38652 --- [io-8101-exec-43] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543326,结束时间：=1615454551541,新增属性耗时：8215
2021-03-11 17:22:31.541 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.541 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.559 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.559 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.559 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.559 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.559 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.559 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:31.560 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383126120108032(Long), 4133627517309423616(Long), qq_test_3052(String), qq_test_3052(String), RW(String), 4(String), 2021-03-11 17:22:31.541(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.566 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.578 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.578 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.578 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.584 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.584 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.584 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.591 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.591 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.592 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.592 DEBUG 38652 --- [nio-8101-exec-1] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.598 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.598 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.598 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3059(String), qq_test_3059(String), qq_test_3059(String)
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.609 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.618 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.618 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.618 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3060(String), qq_test_3060(String), qq_test_3060(String)
2021-03-11 17:22:31.630 DEBUG 38652 --- [io-8101-exec-17] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:31.630 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.630 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3057(String)
Exception in thread "Thread-258" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:31.717 DEBUG 38652 --- [io-8101-exec-44] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:31.718 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.718 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3056(String)
2021-03-11 17:22:31.743  INFO 38652 --- [nio-8101-exec-1] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543612,结束时间：=1615454551743,新增属性耗时：8131
2021-03-11 17:22:31.750 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:31.750 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:31.762 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:31.762 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:31.763 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:31.781 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:31.781 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.781 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.791 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:31.791 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.791 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.802 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.802 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.802 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3061(String), qq_test_3061(String), qq_test_3061(String)
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-25] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-14] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383128070459393(Long)
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:31.882 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3058(String)
2021-03-11 17:22:31.893 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:31.893 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:31.893 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383128070459393(Long)
2021-03-11 17:22:31.907 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:31.907 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:31.907 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383132478672896(Long), 4134383128070459393(Long), 2021-03-11 17:22:31.907(Timestamp), 999(Integer)
2021-03-11 17:22:31.954 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.954 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:31.954 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.961 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:31.961 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:31.961 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383128070459393(Long), 4133627517309423616(Long), qq_test_3054(String), qq_test_3054(String), RW(String), 4(String), 2021-03-11 17:22:31.954(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:31.984 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:31.984 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:31.984 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:31.997 DEBUG 38652 --- [io-8101-exec-25] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.001 DEBUG 38652 --- [io-8101-exec-31] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.001 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.001 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383128070459392(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.009 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.009 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.009 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383128070459392(Long)
Exception in thread "Thread-259" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.031 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.031 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.032 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383132998766592(Long), 4134383128070459392(Long), 2021-03-11 17:22:32.031(Timestamp), 999(Integer)
2021-03-11 17:22:32.063 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.063 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.063 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.078 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.078 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.079 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383128070459392(Long), 4133627517309423616(Long), qq_test_3055(String), qq_test_3055(String), RW(String), 4(String), 2021-03-11 17:22:32.063(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.107 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.107 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.107 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.115 DEBUG 38652 --- [io-8101-exec-38] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:32.116 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.116 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3059(String)
2021-03-11 17:22:32.116 DEBUG 38652 --- [io-8101-exec-31] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.124 DEBUG 38652 --- [io-8101-exec-41] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:32.124 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.124 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3061(String)
Exception in thread "Thread-260" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.178 DEBUG 38652 --- [io-8101-exec-18] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:32.178 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.178 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3060(String)
2021-03-11 17:22:32.223  INFO 38652 --- [io-8101-exec-31] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543629,结束时间：=1615454552223,新增属性耗时：8594
2021-03-11 17:22:32.223  INFO 38652 --- [io-8101-exec-25] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543618,结束时间：=1615454552223,新增属性耗时：8605
2021-03-11 17:22:32.239 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.239 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.241 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.241 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.250 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.250 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.250 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.250 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.250 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.250 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.266 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.266 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.266 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.268 DEBUG 38652 --- [io-8101-exec-44] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.268 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.268 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383129026760704(Long)
2021-03-11 17:22:32.276 DEBUG 38652 --- [io-8101-exec-17] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.276 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.276 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.276 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.277 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383129316167680(Long)
2021-03-11 17:22:32.277 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.281 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.281 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.281 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.284 DEBUG 38652 --- [io-8101-exec-14] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.285 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.285 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383130683510784(Long)
2021-03-11 17:22:32.288 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.288 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.288 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3063(String), qq_test_3063(String), qq_test_3063(String)
2021-03-11 17:22:32.288 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.288 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.288 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383130683510784(Long)
2021-03-11 17:22:32.290 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383129316167680(Long)
2021-03-11 17:22:32.294 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.294 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.294 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383129026760704(Long)
2021-03-11 17:22:32.300 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.300 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.300 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3062(String), qq_test_3062(String), qq_test_3062(String)
2021-03-11 17:22:32.308 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.309 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.309 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134164783104(Long), 4134383129316167680(Long), 2021-03-11 17:22:32.309(Timestamp), 999(Integer)
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134240280576(Long), 4134383130683510784(Long), 2021-03-11 17:22:32.327(Timestamp), 999(Integer)
2021-03-11 17:22:32.327 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134240280577(Long), 4134383129026760704(Long), 2021-03-11 17:22:32.327(Timestamp), 999(Integer)
2021-03-11 17:22:32.337 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.337 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.337 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.344 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.344 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.345 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383129316167680(Long), 4133627517309423616(Long), qq_test_3057(String), qq_test_3057(String), RW(String), 4(String), 2021-03-11 17:22:32.337(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.352 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.363 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383129026760704(Long), 4133627517309423616(Long), qq_test_3056(String), qq_test_3056(String), RW(String), 4(String), 2021-03-11 17:22:32.352(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.364 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383130683510784(Long), 4133627517309423616(Long), qq_test_3058(String), qq_test_3058(String), RW(String), 4(String), 2021-03-11 17:22:32.352(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.382 DEBUG 38652 --- [io-8101-exec-17] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.389 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.389 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.389 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.404 DEBUG 38652 --- [io-8101-exec-14] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-261" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-41] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-38] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383131870498816(Long)
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.420 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383131048415232(Long)
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383131048415232(Long)
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383131870498816(Long)
2021-03-11 17:22:32.428 DEBUG 38652 --- [io-8101-exec-44] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
Exception in thread "Thread-262" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.454 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.454 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.455 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.455 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.455 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134772957184(Long), 4134383131048415232(Long), 2021-03-11 17:22:32.454(Timestamp), 999(Integer)
2021-03-11 17:22:32.455 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134772957185(Long), 4134383131870498816(Long), 2021-03-11 17:22:32.454(Timestamp), 999(Integer)
2021-03-11 17:22:32.476  INFO 38652 --- [io-8101-exec-17] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543629,结束时间：=1615454552476,新增属性耗时：8847
Exception in thread "Thread-263" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.492 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.492 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.494 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.494 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.494 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.496 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.496 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.496 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.498  INFO 38652 --- [io-8101-exec-14] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454544237,结束时间：=1615454552498,新增属性耗时：8261
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383131870498816(Long), 4133627517309423616(Long), qq_test_3061(String), qq_test_3061(String), RW(String), 4(String), 2021-03-11 17:22:32.494(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.500 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383131048415232(Long), 4133627517309423616(Long), qq_test_3059(String), qq_test_3059(String), RW(String), 4(String), 2021-03-11 17:22:32.496(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.508 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.508 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.514 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.514 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.515 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.516 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.517 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.517 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.522 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.522 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.522 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.524 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.524 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.524 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.528  INFO 38652 --- [io-8101-exec-44] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454543629,结束时间：=1615454552528,新增属性耗时：8899
2021-03-11 17:22:32.529 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.529 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.529 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.532 DEBUG 38652 --- [io-8101-exec-41] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.539 DEBUG 38652 --- [io-8101-exec-38] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.545 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3064(String), qq_test_3064(String), qq_test_3064(String)
2021-03-11 17:22:32.553 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.553 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.553 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.560 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.560 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.560 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.569 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.569 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.569 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3065(String), qq_test_3065(String), qq_test_3065(String)
2021-03-11 17:22:32.581 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.581 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.581 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-265" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-264" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.590 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.590 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.591 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.596 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.597 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.597 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3066(String), qq_test_3066(String), qq_test_3066(String)
2021-03-11 17:22:32.609 DEBUG 38652 --- [io-8101-exec-18] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:32.609 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:32.609 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383131048415233(Long)
2021-03-11 17:22:32.613 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:32.613 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:32.613 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383131048415233(Long)
2021-03-11 17:22:32.624  INFO 38652 --- [io-8101-exec-41] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545044,结束时间：=1615454552624,新增属性耗时：7580
2021-03-11 17:22:32.625 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:32.625 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:32.626 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383135490183168(Long), 4134383131048415233(Long), 2021-03-11 17:22:32.625(Timestamp), 999(Integer)
2021-03-11 17:22:32.642 DEBUG 38652 --- [io-8101-exec-47] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:32.642 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.642 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.642 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.642 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3062(String)
2021-03-11 17:22:32.649 DEBUG 38652 --- [nio-8101-exec-5] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:32.649 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.649 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3063(String)
2021-03-11 17:22:32.651 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.652 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.652 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.659 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.659 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.659 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.664  INFO 38652 --- [io-8101-exec-38] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454544823,结束时间：=1615454552664,新增属性耗时：7841
2021-03-11 17:22:32.667 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.668 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:32.668 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383131048415233(Long), 4133627517309423616(Long), qq_test_3060(String), qq_test_3060(String), RW(String), 4(String), 2021-03-11 17:22:32.659(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:32.670 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.670 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.673 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.673 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.673 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.683 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.683 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.683 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.683 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.684 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.684 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.685 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:32.685 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.685 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.696 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.696 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.696 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3067(String), qq_test_3067(String), qq_test_3067(String)
2021-03-11 17:22:32.696 DEBUG 38652 --- [io-8101-exec-18] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:32.704 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.704 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.705 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.715 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.715 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.715 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.717 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.718 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.718 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3068(String), qq_test_3068(String), qq_test_3068(String)
Exception in thread "Thread-266" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:32.789  INFO 38652 --- [io-8101-exec-18] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454544858,结束时间：=1615454552789,新增属性耗时：7931
2021-03-11 17:22:32.793 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:32.793 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:32.797 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:32.797 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:32.797 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:32.813 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:32.813 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:32.813 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.819 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:32.819 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:32.819 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:32.823 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:32.823 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:32.823 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3069(String), qq_test_3069(String), qq_test_3069(String)
2021-03-11 17:22:33.056 DEBUG 38652 --- [io-8101-exec-13] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.056 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.056 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3067(String)
2021-03-11 17:22:33.072 DEBUG 38652 --- [io-8101-exec-36] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.072 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.072 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3065(String)
2021-03-11 17:22:33.086 DEBUG 38652 --- [io-8101-exec-47] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.086 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.086 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383133917319168(Long)
2021-03-11 17:22:33.092 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.092 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.092 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383133917319168(Long)
2021-03-11 17:22:33.112 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.112 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.112 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383137532809216(Long), 4134383133917319168(Long), 2021-03-11 17:22:33.112(Timestamp), 999(Integer)
2021-03-11 17:22:33.133 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.133 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.133 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.143 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.143 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.143 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383133917319168(Long), 4133627517309423616(Long), qq_test_3062(String), qq_test_3062(String), RW(String), 4(String), 2021-03-11 17:22:33.133(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.170 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.171 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.171 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.174 DEBUG 38652 --- [io-8101-exec-32] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.174 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.174 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3064(String)
2021-03-11 17:22:33.179 DEBUG 38652 --- [io-8101-exec-47] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-267" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:33.247 DEBUG 38652 --- [io-8101-exec-34] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.247 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.247 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3068(String)
2021-03-11 17:22:33.264 DEBUG 38652 --- [nio-8101-exec-5] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.264 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.264 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383133917319169(Long)
2021-03-11 17:22:33.269 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.269 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.269 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383133917319169(Long)
2021-03-11 17:22:33.275  INFO 38652 --- [io-8101-exec-47] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545095,结束时间：=1615454553275,新增属性耗时：8180
2021-03-11 17:22:33.282 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.282 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.282 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383138245840896(Long), 4134383133917319169(Long), 2021-03-11 17:22:33.282(Timestamp), 999(Integer)
2021-03-11 17:22:33.285 DEBUG 38652 --- [io-8101-exec-13] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.285 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:33.285 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.285 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:33.285 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383135599235072(Long)
2021-03-11 17:22:33.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:33.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:33.289 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:33.291 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.291 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.291 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.291 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.291 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.291 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383135599235072(Long)
2021-03-11 17:22:33.302 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.302 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:33.302 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.302 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.302 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.302 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383133917319169(Long), 4133627517309423616(Long), qq_test_3063(String), qq_test_3063(String), RW(String), 4(String), 2021-03-11 17:22:33.291(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.306 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.306 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.306 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383138346504192(Long), 4134383135599235072(Long), 2021-03-11 17:22:33.306(Timestamp), 999(Integer)
2021-03-11 17:22:33.308 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:33.308 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.308 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.310 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.310 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.310 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.311 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.311 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.311 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3070(String), qq_test_3070(String), qq_test_3070(String)
2021-03-11 17:22:33.321 DEBUG 38652 --- [nio-8101-exec-5] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:33.330 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.330 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.330 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.337 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.338 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.338 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383135599235072(Long), 4133627517309423616(Long), qq_test_3067(String), qq_test_3067(String), RW(String), 4(String), 2021-03-11 17:22:33.33(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.354 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.354 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.354 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.360 DEBUG 38652 --- [io-8101-exec-13] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-268" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-269" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:33.431 DEBUG 38652 --- [io-8101-exec-50] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.431 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.431 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3066(String)
2021-03-11 17:22:33.469 DEBUG 38652 --- [io-8101-exec-36] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.469 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.469 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383135033004032(Long)
2021-03-11 17:22:33.477 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.477 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.477 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383135033004032(Long)
2021-03-11 17:22:33.489 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.489 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.490 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383139114061824(Long), 4134383135033004032(Long), 2021-03-11 17:22:33.489(Timestamp), 999(Integer)
2021-03-11 17:22:33.516 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.517 DEBUG 38652 --- [nio-8101-exec-7] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.517 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.517 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.517 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.517 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3069(String)
2021-03-11 17:22:33.524 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.524 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.525 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383135033004032(Long), 4133627517309423616(Long), qq_test_3065(String), qq_test_3065(String), RW(String), 4(String), 2021-03-11 17:22:33.517(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.550 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.550 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.550 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.558 DEBUG 38652 --- [io-8101-exec-36] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:33.574  INFO 38652 --- [nio-8101-exec-5] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545168,结束时间：=1615454553574,新增属性耗时：8406
2021-03-11 17:22:33.580 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:33.580 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:33.585 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:33.585 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:33.585 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
Exception in thread "Thread-270" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:33.599 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:33.599  INFO 38652 --- [io-8101-exec-13] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546094,结束时间：=1615454553599,新增属性耗时：7505
2021-03-11 17:22:33.599 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.599 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.607 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:33.607 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:33.607 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:33.607 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.607 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.613 DEBUG 38652 --- [io-8101-exec-12] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:33.614 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.614 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3070(String)
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3071(String), qq_test_3071(String), qq_test_3071(String)
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:33.620 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:33.639 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:33.639 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.639 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.640  INFO 38652 --- [io-8101-exec-36] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545302,结束时间：=1615454553640,新增属性耗时：8338
2021-03-11 17:22:33.659 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:33.659 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:33.659 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:33.659 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.659 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3072(String), qq_test_3072(String), qq_test_3072(String)
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:33.672 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:33.686 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:33.686 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.686 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.698 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:33.698 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.698 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.708 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.708 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.709 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3073(String), qq_test_3073(String), qq_test_3073(String)
2021-03-11 17:22:33.726 DEBUG 38652 --- [io-8101-exec-32] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.726 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.726 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383134965895168(Long)
2021-03-11 17:22:33.734 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.734 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.734 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383134965895168(Long)
2021-03-11 17:22:33.747 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.747 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.748 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383140196192256(Long), 4134383134965895168(Long), 2021-03-11 17:22:33.747(Timestamp), 999(Integer)
2021-03-11 17:22:33.759 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.759 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.759 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.770 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.770 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.771 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383134965895168(Long), 4133627517309423616(Long), qq_test_3064(String), qq_test_3064(String), RW(String), 4(String), 2021-03-11 17:22:33.759(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.800 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.800 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.800 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.818 DEBUG 38652 --- [io-8101-exec-32] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:33.852 DEBUG 38652 --- [io-8101-exec-34] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:33.852 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:33.852 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383135733452800(Long)
2021-03-11 17:22:33.868 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:33.868 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:33.868 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383135733452800(Long)
Exception in thread "Thread-271" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:33.877  INFO 38652 --- [io-8101-exec-32] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545244,结束时间：=1615454553877,新增属性耗时：8633
2021-03-11 17:22:33.879 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:33.879 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:33.880 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383140749840384(Long), 4134383135733452800(Long), 2021-03-11 17:22:33.879(Timestamp), 999(Integer)
2021-03-11 17:22:33.881 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:33.881 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:33.885 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:33.886 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:33.886 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:33.887 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.887 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.887 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.897 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.897 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:33.897 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.897 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.897 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:33.898 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383135733452800(Long), 4133627517309423616(Long), qq_test_3068(String), qq_test_3068(String), RW(String), 4(String), 2021-03-11 17:22:33.887(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:33.905 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:33.905 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:33.905 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3074(String), qq_test_3074(String), qq_test_3074(String)
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:33.916 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:33.934 DEBUG 38652 --- [io-8101-exec-34] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-272" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.022 DEBUG 38652 --- [io-8101-exec-50] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.022 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.022 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383135188193280(Long)
2021-03-11 17:22:34.029 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.029 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.030 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383135188193280(Long)
2021-03-11 17:22:34.047 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.048 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.048 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383141454483456(Long), 4134383135188193280(Long), 2021-03-11 17:22:34.047(Timestamp), 999(Integer)
2021-03-11 17:22:34.052 DEBUG 38652 --- [nio-8101-exec-7] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.053 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.053 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383136211603456(Long)
2021-03-11 17:22:34.065 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.066 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.066 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.066 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.066 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.066 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383136211603456(Long)
2021-03-11 17:22:34.068 DEBUG 38652 --- [io-8101-exec-23] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.069 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.069 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3071(String)
2021-03-11 17:22:34.075 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.075 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.075 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383135188193280(Long), 4133627517309423616(Long), qq_test_3066(String), qq_test_3066(String), RW(String), 4(String), 2021-03-11 17:22:34.066(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.086 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.086 DEBUG 38652 --- [io-8101-exec-40] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.086  INFO 38652 --- [io-8101-exec-34] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546106,结束时间：=1615454554086,新增属性耗时：7980
2021-03-11 17:22:34.086 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.086 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3072(String)
2021-03-11 17:22:34.086 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.087 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383141618061312(Long), 4134383136211603456(Long), 2021-03-11 17:22:34.086(Timestamp), 999(Integer)
2021-03-11 17:22:34.094 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.094 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.094 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.098 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.098 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.100 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.100 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.100 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.105 DEBUG 38652 --- [io-8101-exec-50] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.109 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.109 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.109 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:34.111 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.112 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.112 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383136211603456(Long), 4133627517309423616(Long), qq_test_3069(String), qq_test_3069(String), RW(String), 4(String), 2021-03-11 17:22:34.1(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-12] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.127 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383138275201024(Long)
2021-03-11 17:22:34.137 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.137 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.137 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.137 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.137 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383138275201024(Long)
2021-03-11 17:22:34.137 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-273" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.151 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.151 DEBUG 38652 --- [nio-8101-exec-7] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.151 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.151 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:34.159 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.159 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.159 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.159 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.160 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3075(String), qq_test_3075(String), qq_test_3075(String)
2021-03-11 17:22:34.160 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383141924245504(Long), 4134383138275201024(Long), 2021-03-11 17:22:34.159(Timestamp), 999(Integer)
Exception in thread "Thread-274" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.186 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.186 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.186 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.193 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.193 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.193 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383138275201024(Long), 4133627517309423616(Long), qq_test_3070(String), qq_test_3070(String), RW(String), 4(String), 2021-03-11 17:22:34.186(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.218 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.218 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.218 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.231 DEBUG 38652 --- [io-8101-exec-12] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.234  INFO 38652 --- [io-8101-exec-50] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454545368,结束时间：=1615454554234,新增属性耗时：8866
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:34.240  INFO 38652 --- [nio-8101-exec-7] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546488,结束时间：=1615454554240,新增属性耗时：7752
2021-03-11 17:22:34.242 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.242 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.246 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.246 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.247 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.247 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.247 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:34.253 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.254 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.254 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:34.256 DEBUG 38652 --- [io-8101-exec-20] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.256 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.256 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3073(String)
Exception in thread "Thread-275" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.267 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.267 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.267 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.271 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.271 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.271 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.285 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.295 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.295 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.295 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3077(String), qq_test_3077(String), qq_test_3077(String)
2021-03-11 17:22:34.299 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.299 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.299 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3076(String), qq_test_3076(String), qq_test_3076(String)
2021-03-11 17:22:34.392  INFO 38652 --- [io-8101-exec-12] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546488,结束时间：=1615454554392,新增属性耗时：7904
2021-03-11 17:22:34.405 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.405 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.414 DEBUG 38652 --- [io-8101-exec-19] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.414 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.414 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3074(String)
2021-03-11 17:22:34.425 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.426 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.426 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:34.427 DEBUG 38652 --- [io-8101-exec-40] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.427 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.427 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383139663515648(Long)
2021-03-11 17:22:34.438 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.438 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.438 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383139663515648(Long)
2021-03-11 17:22:34.441 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.441 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.441 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.455 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383143165759488(Long), 4134383139663515648(Long), 2021-03-11 17:22:34.455(Timestamp), 999(Integer)
2021-03-11 17:22:34.462 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.462 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.462 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3078(String), qq_test_3078(String), qq_test_3078(String)
2021-03-11 17:22:34.467 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.467 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.467 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.472 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.472 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.472 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383139663515648(Long), 4133627517309423616(Long), qq_test_3072(String), qq_test_3072(String), RW(String), 4(String), 2021-03-11 17:22:34.467(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.490 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.490 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.490 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.492 DEBUG 38652 --- [io-8101-exec-23] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.492 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.492 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383139516715008(Long)
2021-03-11 17:22:34.497 DEBUG 38652 --- [io-8101-exec-40] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.499 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.499 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.499 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383139516715008(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-276" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.524 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.524 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.525 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383143455166464(Long), 4134383139516715008(Long), 2021-03-11 17:22:34.524(Timestamp), 999(Integer)
2021-03-11 17:22:34.560 DEBUG 38652 --- [io-8101-exec-10] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.560 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.561 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3075(String)
2021-03-11 17:22:34.574 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.574 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.574 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.590 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.590 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.590 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383139516715008(Long), 4133627517309423616(Long), qq_test_3071(String), qq_test_3071(String), RW(String), 4(String), 2021-03-11 17:22:34.574(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.612 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.612 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.612 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.625 DEBUG 38652 --- [io-8101-exec-23] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-277" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.702  INFO 38652 --- [io-8101-exec-40] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546740,结束时间：=1615454554702,新增属性耗时：7962
2021-03-11 17:22:34.711 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.711 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-37] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3077(String)
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.721 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:34.739 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.740 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.740 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.752 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.752 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.752 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.758  INFO 38652 --- [io-8101-exec-23] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546598,结束时间：=1615454554758,新增属性耗时：8160
2021-03-11 17:22:34.758 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.759 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.759 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3079(String), qq_test_3079(String), qq_test_3079(String)
2021-03-11 17:22:34.778 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:34.778 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:34.779 DEBUG 38652 --- [io-8101-exec-49] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.779 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.779 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3076(String)
2021-03-11 17:22:34.788 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:34.788 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:34.788 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:34.793 DEBUG 38652 --- [io-8101-exec-20] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.793 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.793 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383139881619456(Long)
2021-03-11 17:22:34.800 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.800 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.800 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383139881619456(Long)
2021-03-11 17:22:34.804 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:34.804 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.804 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.813 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:34.813 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.813 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.818 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:34.818 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:34.818 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383144688291840(Long), 4134383139881619456(Long), 2021-03-11 17:22:34.818(Timestamp), 999(Integer)
2021-03-11 17:22:34.820 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.820 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.820 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3080(String), qq_test_3080(String), qq_test_3080(String)
2021-03-11 17:22:34.839 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.839 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:34.839 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.845 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:34.845 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:34.845 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383139881619456(Long), 4133627517309423616(Long), qq_test_3073(String), qq_test_3073(String), RW(String), 4(String), 2021-03-11 17:22:34.839(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:34.862 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:34.862 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:34.862 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:34.876 DEBUG 38652 --- [io-8101-exec-20] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-278" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:34.945 DEBUG 38652 --- [io-8101-exec-15] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:34.945 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:34.946 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3078(String)
2021-03-11 17:22:34.990 DEBUG 38652 --- [io-8101-exec-19] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:34.990 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:34.990 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383140775006208(Long)
2021-03-11 17:22:34.999 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:34.999 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:34.999 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383140775006208(Long)
2021-03-11 17:22:35.015 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.015 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.016 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383145514569728(Long), 4134383140775006208(Long), 2021-03-11 17:22:35.015(Timestamp), 999(Integer)
2021-03-11 17:22:35.029 DEBUG 38652 --- [io-8101-exec-10] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.030 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.030 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383141714530304(Long)
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383141714530304(Long)
2021-03-11 17:22:35.041 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.056 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.056 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.057 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383140775006208(Long), 4133627517309423616(Long), qq_test_3074(String), qq_test_3074(String), RW(String), 4(String), 2021-03-11 17:22:35.041(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.063 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.064 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.064 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383145720090624(Long), 4134383141714530304(Long), 2021-03-11 17:22:35.064(Timestamp), 999(Integer)
2021-03-11 17:22:35.071 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.071 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.071 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.081 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.081 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.081 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.082 DEBUG 38652 --- [io-8101-exec-19] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:35.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.087 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383141714530304(Long), 4133627517309423616(Long), qq_test_3075(String), qq_test_3075(String), RW(String), 4(String), 2021-03-11 17:22:35.081(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
Exception in thread "Thread-279" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.110 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.110 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.110 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.124 DEBUG 38652 --- [io-8101-exec-45] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.124 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.124 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3080(String)
2021-03-11 17:22:35.125 DEBUG 38652 --- [io-8101-exec-10] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-280" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.167 DEBUG 38652 --- [io-8101-exec-39] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.167 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.167 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3079(String)
2021-03-11 17:22:35.176  INFO 38652 --- [io-8101-exec-20] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454546811,结束时间：=1615454555176,新增属性耗时：8365
2021-03-11 17:22:35.191 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.191 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.194 DEBUG 38652 --- [io-8101-exec-37] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.195 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.195 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383142318510080(Long)
2021-03-11 17:22:35.203 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.204 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.204 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.207 DEBUG 38652 --- [io-8101-exec-49] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.207 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.208 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.208 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.208 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383142318510080(Long)
2021-03-11 17:22:35.208 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383142289149952(Long)
2021-03-11 17:22:35.214 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.214 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.214 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383142289149952(Long)
2021-03-11 17:22:35.219 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.219 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.219 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.230 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.230 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.230  INFO 38652 --- [io-8101-exec-19] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454547035,结束时间：=1615454555230,新增属性耗时：8195
2021-03-11 17:22:35.231 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.231 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.231 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.231 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.231 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146416345089(Long), 4134383142318510080(Long), 2021-03-11 17:22:35.23(Timestamp), 999(Integer)
2021-03-11 17:22:35.231 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.231 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146416345088(Long), 4134383142289149952(Long), 2021-03-11 17:22:35.23(Timestamp), 999(Integer)
2021-03-11 17:22:35.239 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.239 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.240 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.240 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.240 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3082(String), qq_test_3082(String), qq_test_3082(String)
2021-03-11 17:22:35.247  INFO 38652 --- [io-8101-exec-10] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454547424,结束时间：=1615454555247,新增属性耗时：7823
2021-03-11 17:22:35.250 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.250 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.250 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.253 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.256 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.256 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.256 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383142289149952(Long), 4133627517309423616(Long), qq_test_3076(String), qq_test_3076(String), RW(String), 4(String), 2021-03-11 17:22:35.25(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.260 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.260 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.260 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.260 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.260 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.261 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383142318510080(Long), 4133627517309423616(Long), qq_test_3077(String), qq_test_3077(String), RW(String), 4(String), 2021-03-11 17:22:35.253(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.266 DEBUG 38652 --- [io-8101-exec-15] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.266 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.266 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383143039930368(Long)
2021-03-11 17:22:35.270 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.270 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.270 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.274 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.274 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.275 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.275 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.275 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.275 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383143039930368(Long)
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.283 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.284 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.284 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.284 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.289 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.289 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.290 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3081(String), qq_test_3081(String), qq_test_3081(String)
2021-03-11 17:22:35.290 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.290 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.290 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.291 DEBUG 38652 --- [io-8101-exec-49] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.292 DEBUG 38652 --- [io-8101-exec-37] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:35.300 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.300 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.300 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146709946368(Long), 4134383143039930368(Long), 2021-03-11 17:22:35.3(Timestamp), 999(Integer)
2021-03-11 17:22:35.302 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.302 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.302 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3083(String), qq_test_3083(String), qq_test_3083(String)
2021-03-11 17:22:35.316 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.316 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.316 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-282" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-281" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.321 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.321 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.321 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383143039930368(Long), 4133627517309423616(Long), qq_test_3078(String), qq_test_3078(String), RW(String), 4(String), 2021-03-11 17:22:35.316(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.339 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.339 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.339 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.351 DEBUG 38652 --- [io-8101-exec-15] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-283" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.434  INFO 38652 --- [io-8101-exec-49] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454547472,结束时间：=1615454555434,新增属性耗时：7962
2021-03-11 17:22:35.443 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.443 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.449 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.449 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.449 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.455  INFO 38652 --- [io-8101-exec-37] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454547687,结束时间：=1615454555455,新增属性耗时：7768
2021-03-11 17:22:35.455  INFO 38652 --- [io-8101-exec-15] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548004,结束时间：=1615454555455,新增属性耗时：7451
2021-03-11 17:22:35.462 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.462 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.464 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.464 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.465 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.466 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.466 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.473 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.473 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.473 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.473 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.473 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.473 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.479 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.479 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.479 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.493 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.493 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.493 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3084(String), qq_test_3084(String), qq_test_3084(String)
2021-03-11 17:22:35.502 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.503 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.503 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.504 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.504 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.504 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.511 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.511 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.511 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.515 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.521 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.521 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.521 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3086(String), qq_test_3086(String), qq_test_3086(String)
2021-03-11 17:22:35.524 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.524 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.524 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3085(String), qq_test_3085(String), qq_test_3085(String)
2021-03-11 17:22:35.559 DEBUG 38652 --- [io-8101-exec-39] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.559 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.559 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383144281444352(Long)
2021-03-11 17:22:35.572 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.572 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.572 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383144281444352(Long)
2021-03-11 17:22:35.595 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.595 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.595 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383147947266048(Long), 4134383144281444352(Long), 2021-03-11 17:22:35.595(Timestamp), 999(Integer)
2021-03-11 17:22:35.611 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.611 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.611 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.621 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.621 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.622 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383144281444352(Long), 4133627517309423616(Long), qq_test_3079(String), qq_test_3079(String), RW(String), 4(String), 2021-03-11 17:22:35.611(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.639 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.639 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.639 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.646 DEBUG 38652 --- [nio-8101-exec-8] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.646 DEBUG 38652 --- [io-8101-exec-45] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:35.646 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.646 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:35.646 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3082(String)
2021-03-11 17:22:35.646 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383144562462720(Long)
2021-03-11 17:22:35.647 DEBUG 38652 --- [io-8101-exec-39] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:35.661 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:35.661 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:35.661 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383144562462720(Long)
2021-03-11 17:22:35.678 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:35.679 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:35.679 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383148295393280(Long), 4134383144562462720(Long), 2021-03-11 17:22:35.678(Timestamp), 999(Integer)
Exception in thread "Thread-284" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.696 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.696 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.696 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.705 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.705 DEBUG 38652 --- [io-8101-exec-27] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.705 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.705 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:35.705 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3083(String)
2021-03-11 17:22:35.706 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383144562462720(Long), 4133627517309423616(Long), qq_test_3080(String), qq_test_3080(String), RW(String), 4(String), 2021-03-11 17:22:35.696(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:35.739 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:35.739 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.739 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.758 DEBUG 38652 --- [io-8101-exec-16] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.759 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.759 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3081(String)
2021-03-11 17:22:35.774 DEBUG 38652 --- [io-8101-exec-45] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:35.806  INFO 38652 --- [io-8101-exec-39] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548004,结束时间：=1615454555806,新增属性耗时：7802
Exception in thread "Thread-285" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:35.822 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.822 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.832 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.832 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.833 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.853 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.853 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.854 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.862 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:35.862 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:35.862 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:35.875 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:35.875 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.875 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3087(String), qq_test_3087(String), qq_test_3087(String)
2021-03-11 17:22:35.950  INFO 38652 --- [io-8101-exec-45] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548097,结束时间：=1615454555950,新增属性耗时：7853
2021-03-11 17:22:35.959 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:35.959 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-29] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3085(String)
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:35.968 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:35.992 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:35.992 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:35.992 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.005 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.005 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.005 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.017 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.017 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.017 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3088(String), qq_test_3088(String), qq_test_3088(String)
2021-03-11 17:22:36.104 DEBUG 38652 --- [nio-8101-exec-6] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.104 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.104 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3086(String)
2021-03-11 17:22:36.113 DEBUG 38652 --- [io-8101-exec-33] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.114 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.114 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3084(String)
2021-03-11 17:22:36.171 DEBUG 38652 --- [io-8101-exec-27] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.171 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.171 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383146542174208(Long)
2021-03-11 17:22:36.177 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.177 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.177 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383146542174208(Long)
2021-03-11 17:22:36.189 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.189 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.189 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383150438682624(Long), 4134383146542174208(Long), 2021-03-11 17:22:36.189(Timestamp), 999(Integer)
2021-03-11 17:22:36.207 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.207 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.207 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.212 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.212 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.212 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146542174208(Long), 4133627517309423616(Long), qq_test_3083(String), qq_test_3083(String), RW(String), 4(String), 2021-03-11 17:22:36.207(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.224 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.225 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.225 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.240 DEBUG 38652 --- [io-8101-exec-27] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.241 DEBUG 38652 --- [nio-8101-exec-8] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.241 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.241 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383146303098880(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:36.251 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.251 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.251 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383146303098880(Long)
2021-03-11 17:22:36.260 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.261 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.261 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383150740672512(Long), 4134383146303098880(Long), 2021-03-11 17:22:36.261(Timestamp), 999(Integer)
Exception in thread "Thread-286" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.272 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.272 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.272 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.276 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.276 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.277 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146303098880(Long), 4133627517309423616(Long), qq_test_3082(String), qq_test_3082(String), RW(String), 4(String), 2021-03-11 17:22:36.272(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.286 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.286 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.286 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.296 DEBUG 38652 --- [nio-8101-exec-8] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-287" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.376  INFO 38652 --- [io-8101-exec-27] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548810,结束时间：=1615454556376,新增属性耗时：7566
2021-03-11 17:22:36.386 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:36.386 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:36.388 DEBUG 38652 --- [io-8101-exec-33] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.388 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.388 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383147334897664(Long)
2021-03-11 17:22:36.398 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:36.398 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:36.398 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:36.402 DEBUG 38652 --- [io-8101-exec-29] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.402 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.402 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383147435560960(Long)
2021-03-11 17:22:36.408 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.408 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.408 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383147334897664(Long)
2021-03-11 17:22:36.416 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:36.416 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.416 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.420 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.420 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.420 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383147435560960(Long)
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.425  INFO 38652 --- [nio-8101-exec-8] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548461,结束时间：=1615454556425,新增属性耗时：7964
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383151428538368(Long), 4134383147334897664(Long), 2021-03-11 17:22:36.425(Timestamp), 999(Integer)
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.425 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.432 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:36.432 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:36.432 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.432 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.432 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3089(String), qq_test_3089(String), qq_test_3089(String)
2021-03-11 17:22:36.441 DEBUG 38652 --- [io-8101-exec-16] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.441 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:36.442 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.442 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383146512814080(Long)
2021-03-11 17:22:36.442 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:36.442 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.446 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383146512814080(Long)
2021-03-11 17:22:36.450 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.450 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.451 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383151533395968(Long), 4134383147435560960(Long), 2021-03-11 17:22:36.45(Timestamp), 999(Integer)
2021-03-11 17:22:36.454 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.454 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.455 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383147334897664(Long), 4133627517309423616(Long), qq_test_3084(String), qq_test_3084(String), RW(String), 4(String), 2021-03-11 17:22:36.446(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.461 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.461 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:36.461 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.461 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.461 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.461 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383151579533312(Long), 4134383146512814080(Long), 2021-03-11 17:22:36.461(Timestamp), 999(Integer)
2021-03-11 17:22:36.463 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.463 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.463 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.470 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.470 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.470 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.470 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.470 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.471 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.471 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.471 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.471 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383147435560960(Long), 4133627517309423616(Long), qq_test_3085(String), qq_test_3085(String), RW(String), 4(String), 2021-03-11 17:22:36.463(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.478 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-42] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.478 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.478 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3090(String), qq_test_3090(String), qq_test_3090(String)
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3088(String)
2021-03-11 17:22:36.478 DEBUG 38652 --- [io-8101-exec-33] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:36.485 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.486 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.486 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383146512814080(Long), 4133627517309423616(Long), qq_test_3081(String), qq_test_3081(String), RW(String), 4(String), 2021-03-11 17:22:36.478(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.499 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.499 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.500 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
Exception in thread "Thread-288" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.516 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.516 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.516 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.516 DEBUG 38652 --- [io-8101-exec-29] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:36.554 DEBUG 38652 --- [io-8101-exec-48] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.554 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.554 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3087(String)
Exception in thread "Thread-289" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.572 DEBUG 38652 --- [io-8101-exec-16] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-290" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.637 DEBUG 38652 --- [io-8101-exec-35] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.637 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.637 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3089(String)
2021-03-11 17:22:36.646  INFO 38652 --- [io-8101-exec-33] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548841,结束时间：=1615454556646,新增属性耗时：7805
2021-03-11 17:22:36.653 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:36.653 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:36.658 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:36.658 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:36.658 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:36.676 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:36.676 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.677 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.688 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.688 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.688 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.692  INFO 38652 --- [io-8101-exec-29] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548841,结束时间：=1615454556692,新增属性耗时：7851
2021-03-11 17:22:36.701  INFO 38652 --- [io-8101-exec-16] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454548461,结束时间：=1615454556701,新增属性耗时：8240
2021-03-11 17:22:36.701 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.701 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.701 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3091(String), qq_test_3091(String), qq_test_3091(String)
2021-03-11 17:22:36.713 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:36.713 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:36.714 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:36.714 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:36.725 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:36.725 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:36.725 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:36.725 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:36.726 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:36.726 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:36.746 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:36.746 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.746 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.751 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:36.751 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.751 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.757 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.757 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.757 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.761 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.761 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.761 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3093(String), qq_test_3093(String), qq_test_3093(String)
2021-03-11 17:22:36.767 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:36.767 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.767 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.780 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.780 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.780 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3092(String), qq_test_3092(String), qq_test_3092(String)
2021-03-11 17:22:36.813 DEBUG 38652 --- [nio-8101-exec-6] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.813 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.813 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383147435560961(Long)
2021-03-11 17:22:36.824 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.824 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.824 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383147435560961(Long)
2021-03-11 17:22:36.848 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.848 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:36.849 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383153202728960(Long), 4134383147435560961(Long), 2021-03-11 17:22:36.848(Timestamp), 999(Integer)
2021-03-11 17:22:36.875 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.875 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:36.875 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.881 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:36.882 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:36.882 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383147435560961(Long), 4133627517309423616(Long), qq_test_3086(String), qq_test_3086(String), RW(String), 4(String), 2021-03-11 17:22:36.875(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:36.900 DEBUG 38652 --- [nio-8101-exec-9] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:36.900 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:36.900 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3090(String)
2021-03-11 17:22:36.910 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:36.910 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:36.910 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:36.922 DEBUG 38652 --- [nio-8101-exec-6] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:36.964 DEBUG 38652 --- [io-8101-exec-42] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:36.964 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:36.964 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383149511741440(Long)
2021-03-11 17:22:36.980 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:36.980 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:36.980 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383149511741440(Long)
Exception in thread "Thread-291" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:36.999 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:36.999 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:37.000 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383153836068864(Long), 4134383149511741440(Long), 2021-03-11 17:22:36.999(Timestamp), 999(Integer)
2021-03-11 17:22:37.019 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.019 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.019 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.029 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.030 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:37.030 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383149511741440(Long), 4133627517309423616(Long), qq_test_3088(String), qq_test_3088(String), RW(String), 4(String), 2021-03-11 17:22:37.019(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:37.031 DEBUG 38652 --- [io-8101-exec-35] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:37.031 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:37.031 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383151315292160(Long)
2021-03-11 17:22:37.042 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:37.042 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:37.042 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383151315292160(Long)
2021-03-11 17:22:37.049 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.049 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.049 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.057 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:37.057 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:37.058 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383154079338496(Long), 4134383151315292160(Long), 2021-03-11 17:22:37.057(Timestamp), 999(Integer)
2021-03-11 17:22:37.066 DEBUG 38652 --- [io-8101-exec-42] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.071 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.071 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.072 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:37.084 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.085 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:37.085 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383151315292160(Long), 4133627517309423616(Long), qq_test_3089(String), qq_test_3089(String), RW(String), 4(String), 2021-03-11 17:22:37.071(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:37.086  INFO 38652 --- [nio-8101-exec-6] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549310,结束时间：=1615454557086,新增属性耗时：7776
Exception in thread "Thread-292" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:37.099 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:37.099 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:37.114 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.114 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:37.114 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.114 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.114 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:37.114 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:37.129 DEBUG 38652 --- [io-8101-exec-35] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:37.139 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:37.139 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.139 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.151 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.151 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.151 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.165 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.165 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.165 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3094(String), qq_test_3094(String), qq_test_3094(String)
2021-03-11 17:22:37.165 DEBUG 38652 --- [io-8101-exec-48] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:37.165 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:37.165 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383148941316096(Long)
Exception in thread "Thread-293" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:37.175 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:37.175 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:37.175 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383148941316096(Long)
2021-03-11 17:22:37.193 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:37.193 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:37.193 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383154649763840(Long), 4134383148941316096(Long), 2021-03-11 17:22:37.193(Timestamp), 999(Integer)
2021-03-11 17:22:37.203 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.204 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.204 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.210 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.210 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:37.210 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383148941316096(Long), 4133627517309423616(Long), qq_test_3087(String), qq_test_3087(String), RW(String), 4(String), 2021-03-11 17:22:37.204(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:37.225  INFO 38652 --- [io-8101-exec-42] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549534,结束时间：=1615454557225,新增属性耗时：7691
2021-03-11 17:22:37.226 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.226 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.226 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.233 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:37.233 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:37.238 DEBUG 38652 --- [io-8101-exec-48] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.241 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:37.242 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:37.242 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:37.262 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:37.263 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.263 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.266 DEBUG 38652 --- [io-8101-exec-46] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.266 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.266 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3093(String)
Exception in thread "Thread-294" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:37.280 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.280 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.281 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.291 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.291 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.291 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3095(String), qq_test_3095(String), qq_test_3095(String)
2021-03-11 17:22:37.303  INFO 38652 --- [io-8101-exec-35] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549683,结束时间：=1615454557303,新增属性耗时：7620
2021-03-11 17:22:37.319 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:37.319 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:37.329 DEBUG 38652 --- [nio-8101-exec-9] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:37.329 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:37.329 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383151495647232(Long)
2021-03-11 17:22:37.334 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:37.334 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:37.334 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:37.347 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:37.347  INFO 38652 --- [io-8101-exec-48] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549359,结束时间：=1615454557347,新增属性耗时：7988
2021-03-11 17:22:37.347 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:37.347 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383151495647232(Long)
2021-03-11 17:22:37.357 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:37.357 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-30] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.361 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3092(String)
2021-03-11 17:22:37.363 DEBUG 38652 --- [io-8101-exec-21] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.363 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:37.364 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.364 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:37.364 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3091(String)
2021-03-11 17:22:37.364 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:37.364 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:37.364 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:37.364 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383155366989825(Long), 4134383151495647232(Long), 2021-03-11 17:22:37.364(Timestamp), 999(Integer)
2021-03-11 17:22:37.372 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.372 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.372 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.380 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:37.380 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.380 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.384 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.384 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.384 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3097(String), qq_test_3097(String), qq_test_3097(String)
2021-03-11 17:22:37.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.401 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.401 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.401 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.401 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.401 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.401 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3096(String), qq_test_3096(String), qq_test_3096(String)
2021-03-11 17:22:37.409 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.409 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:37.409 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383151495647232(Long), 4133627517309423616(Long), qq_test_3090(String), qq_test_3090(String), RW(String), 4(String), 2021-03-11 17:22:37.401(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:37.436 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.436 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.436 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.446 DEBUG 38652 --- [nio-8101-exec-9] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-295" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:37.528 DEBUG 38652 --- [nio-8101-exec-2] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.528 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.528 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3094(String)
2021-03-11 17:22:37.554  INFO 38652 --- [nio-8101-exec-9] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549689,结束时间：=1615454557554,新增属性耗时：7865
2021-03-11 17:22:37.563 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:37.563 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:37.566 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:37.566 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:37.566 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:37.585 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:37.585 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.585 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.592 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:37.592 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.592 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.603 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.603 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.603 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3098(String), qq_test_3098(String), qq_test_3098(String)
2021-03-11 17:22:37.726 DEBUG 38652 --- [io-8101-exec-26] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.727 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.727 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3097(String)
2021-03-11 17:22:37.783 DEBUG 38652 --- [io-8101-exec-28] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:37.784 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:37.784 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3095(String)
2021-03-11 17:22:37.829 DEBUG 38652 --- [io-8101-exec-46] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:37.829 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:37.829 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383152686829569(Long)
2021-03-11 17:22:37.840 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:37.841 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:37.841 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383152686829569(Long)
2021-03-11 17:22:37.866 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:37.866 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:37.867 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383157472530432(Long), 4134383152686829569(Long), 2021-03-11 17:22:37.866(Timestamp), 999(Integer)
2021-03-11 17:22:37.896 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.896 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:37.896 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.907 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:37.907 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:37.907 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383152686829569(Long), 4133627517309423616(Long), qq_test_3093(String), qq_test_3093(String), RW(String), 4(String), 2021-03-11 17:22:37.896(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:37.930 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:37.930 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:37.930 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:37.945 DEBUG 38652 --- [io-8101-exec-46] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-296" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-21] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-11] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383152405811200(Long)
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:38.025 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3096(String)
2021-03-11 17:22:38.034 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.034 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.034 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383152405811200(Long)
2021-03-11 17:22:38.047 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.047 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.048 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383158231699456(Long), 4134383152405811200(Long), 2021-03-11 17:22:38.047(Timestamp), 999(Integer)
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-30] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.083 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383152686829568(Long)
2021-03-11 17:22:38.094  INFO 38652 --- [io-8101-exec-46] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550197,结束时间：=1615454558094,新增属性耗时：7897
2021-03-11 17:22:38.094 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.094 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.094 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383152405811200(Long), 4133627517309423616(Long), qq_test_3091(String), qq_test_3091(String), RW(String), 4(String), 2021-03-11 17:22:38.083(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.095 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.096 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.096 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383152686829568(Long)
2021-03-11 17:22:38.103 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_FUNCTION where id = ?
2021-03-11 17:22:38.104 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: null
2021-03-11 17:22:38.109 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 0
2021-03-11 17:22:38.109 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==>  Preparing: SELECT count(0) from PROTOCOL_ITEM_OFFSET WHERE del_flag = 0 and attribute=?
2021-03-11 17:22:38.109 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : ==> Parameters: null
2021-03-11 17:22:38.116 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.116 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.116 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.122 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.122 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.123 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383158546272256(Long), 4134383152686829568(Long), 2021-03-11 17:22:38.122(Timestamp), 999(Integer)
2021-03-11 17:22:38.126 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.countProtocolItmlOffset    : <==      Total: 1
2021-03-11 17:22:38.127 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.127 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.128 DEBUG 38652 --- [io-8101-exec-21] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:38.130 DEBUG 38652 --- [io-8101-exec-26] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.130 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.130 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383155241160704(Long)
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:38.135 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
2021-03-11 17:22:38.135 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.136 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.136 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.136 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.136 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383155241160704(Long)
2021-03-11 17:22:38.141 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.141 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = ? and pf.del_flag=0 and (profile_name = ? or pub_product_property_name = ?) and (product_property_name = ? or pub_product_property_name = ?) and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:38.141 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : ==> Parameters: 4133627517309423616(Long), (String), qq_test_3099(String), qq_test_3099(String), qq_test_3099(String)
2021-03-11 17:22:38.142 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.142 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.142 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.144 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.144 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.144 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383158638546944(Long), 4134383155241160704(Long), 2021-03-11 17:22:38.144(Timestamp), 999(Integer)
2021-03-11 17:22:38.155 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.156 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.156 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383152686829568(Long), 4133627517309423616(Long), qq_test_3092(String), qq_test_3092(String), RW(String), 4(String), 2021-03-11 17:22:38.142(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.170 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.170 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.170 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.174 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.174 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.174 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.175 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383155241160704(Long), 4133627517309423616(Long), qq_test_3097(String), qq_test_3097(String), RW(String), 4(String), 2021-03-11 17:22:38.17(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.182 DEBUG 38652 --- [nio-8101-exec-2] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.182 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.182 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383154318413824(Long)
2021-03-11 17:22:38.185 DEBUG 38652 --- [io-8101-exec-30] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:38.200 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.200 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.200 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.200 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.200 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.200 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383154318413824(Long)
2021-03-11 17:22:38.208 DEBUG 38652 --- [io-8101-exec-26] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:38.214 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.214 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.214 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383158932148224(Long), 4134383154318413824(Long), 2021-03-11 17:22:38.214(Timestamp), 999(Integer)
2021-03-11 17:22:38.234 DEBUG 38652 --- [nio-8101-exec-4] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:38.234 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:38.234 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3098(String)
Exception in thread "Thread-297" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-298" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-299" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.246 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.246 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.246 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.255  INFO 38652 --- [io-8101-exec-21] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454549738,结束时间：=1615454558255,新增属性耗时：8517
2021-03-11 17:22:38.255 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.255 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.256 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383154318413824(Long), 4133627517309423616(Long), qq_test_3094(String), qq_test_3094(String), RW(String), 4(String), 2021-03-11 17:22:38.246(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.282 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.282 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.282 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.294  INFO 38652 --- [io-8101-exec-26] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550837,结束时间：=1615454558294,新增属性耗时：7457
2021-03-11 17:22:38.294  INFO 38652 --- [io-8101-exec-30] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550197,结束时间：=1615454558294,新增属性耗时：8097
2021-03-11 17:22:38.294 DEBUG 38652 --- [nio-8101-exec-2] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-300" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.347 DEBUG 38652 --- [io-8101-exec-28] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.347 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.347 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383154851090432(Long)
2021-03-11 17:22:38.351 DEBUG 38652 --- [io-8101-exec-11] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.351 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.351 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383155366989824(Long)
2021-03-11 17:22:38.358 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.358 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.358 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383155366989824(Long)
2021-03-11 17:22:38.358 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.359 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.359 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383154851090432(Long)
2021-03-11 17:22:38.365 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.365 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.366 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383159565488128(Long), 4134383154851090432(Long), 2021-03-11 17:22:38.365(Timestamp), 999(Integer)
2021-03-11 17:22:38.366 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.366 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.366 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383159569682432(Long), 4134383155366989824(Long), 2021-03-11 17:22:38.366(Timestamp), 999(Integer)
2021-03-11 17:22:38.375 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.375 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.375 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.381 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.381 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.381 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.387 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.387 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.388 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383154851090432(Long), 4133627517309423616(Long), qq_test_3095(String), qq_test_3095(String), RW(String), 4(String), 2021-03-11 17:22:38.375(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.389 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383155366989824(Long), 4133627517309423616(Long), qq_test_3096(String), qq_test_3096(String), RW(String), 4(String), 2021-03-11 17:22:38.381(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.395 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.395 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.395 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.399 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.399 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.399 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.405 DEBUG 38652 --- [io-8101-exec-28] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:38.417 DEBUG 38652 --- [io-8101-exec-11] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
2021-03-11 17:22:38.425  INFO 38652 --- [nio-8101-exec-2] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550364,结束时间：=1615454558425,新增属性耗时：8061
2021-03-11 17:22:38.440 DEBUG 38652 --- [nio-8101-exec-3] .b.p.p.d.P.getByProductIdAndPropertyName : <==      Total: 0
2021-03-11 17:22:38.441 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : ==>  Preparing: SELECT pf.* from product_function pf where product_id = (select product_template_id from product_info where id=?) and product_function_name = ? and pf.del_flag=0 and pf.p_id is null order by pf.create_time DESC
2021-03-11 17:22:38.441 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : ==> Parameters: 4133627517309423616(Long), qq_test_3099(String)
Exception in thread "Thread-301" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
Exception in thread "Thread-302" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.487 DEBUG 38652 --- [nio-8101-exec-4] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.487 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.487 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383156214239232(Long)
2021-03-11 17:22:38.493 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.493 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.493 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383156214239232(Long)
2021-03-11 17:22:38.503 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.504 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.504 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383160148496384(Long), 4134383156214239232(Long), 2021-03-11 17:22:38.504(Timestamp), 999(Integer)
2021-03-11 17:22:38.512 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.512 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.513 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.517 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.517 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.517 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383156214239232(Long), 4133627517309423616(Long), qq_test_3098(String), qq_test_3098(String), RW(String), 4(String), 2021-03-11 17:22:38.512(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.528 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.528 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.528 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.532  INFO 38652 --- [io-8101-exec-28] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550448,结束时间：=1615454558532,新增属性耗时：8084
2021-03-11 17:22:38.532  INFO 38652 --- [io-8101-exec-11] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454550837,结束时间：=1615454558532,新增属性耗时：7695
2021-03-11 17:22:38.535 DEBUG 38652 --- [nio-8101-exec-4] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-303" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.621  INFO 38652 --- [nio-8101-exec-4] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454551046,结束时间：=1615454558621,新增属性耗时：7575
2021-03-11 17:22:38.658 DEBUG 38652 --- [nio-8101-exec-3] c.b.p.p.d.P.getByProductIdAndFuntionName : <==      Total: 0
2021-03-11 17:22:38.658 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : ==>  Preparing: SELECT * from PRODUCT_FUNCTION_RELATION pfr where product_function_id=? and pfr.del_flag=0 order by pfr.create_time desc
2021-03-11 17:22:38.658 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : ==> Parameters: 4134383158491746304(Long)
2021-03-11 17:22:38.663 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getListByFunctionId        : <==      Total: 0
2021-03-11 17:22:38.663 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : ==>  Preparing: update PRODUCT_FUNCTION_RELATION set del_flag=1,db_center_code=(SELECT identity_code FROM `belong_identity` LIMIT 0,1) where product_function_id = ?
2021-03-11 17:22:38.663 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : ==> Parameters: 4134383158491746304(Long)
2021-03-11 17:22:38.670 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.deleteByFunctionId         : <==    Updates: 0
2021-03-11 17:22:38.671 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION_RELATION ( id, product_function_id, create_time, text_length ) values ( ?, ?, ?, ? )
2021-03-11 17:22:38.671 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383160848945152(Long), 4134383158491746304(Long), 2021-03-11 17:22:38.671(Timestamp), 999(Integer)
2021-03-11 17:22:38.677 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.677 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==>  Preparing: select product_template_id from product_info where id=?
2021-03-11 17:22:38.677 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.682 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.getProductId               : <==      Total: 1
2021-03-11 17:22:38.682 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==>  Preparing: insert into PRODUCT_FUNCTION ( id, product_id, product_function_name, product_property_name, visit_pattern, data_type, create_time, create_by, profile_name, is_template, is_transform ) values ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2021-03-11 17:22:38.682 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : ==> Parameters: 4134383158491746304(Long), 4133627517309423616(Long), qq_test_3099(String), qq_test_3099(String), RW(String), 4(String), 2021-03-11 17:22:38.677(Timestamp), 687097586842075136(Long), (String), 0(String), 0(Integer)
2021-03-11 17:22:38.696 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.insertSelective            : <==    Updates: 1
2021-03-11 17:22:38.696 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==>  Preparing: select * from PRODUCT_INFO where id = (select product_template_id from product_info where id=?)
2021-03-11 17:22:38.696 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : ==> Parameters: 4133627517309423616(Long)
2021-03-11 17:22:38.705 DEBUG 38652 --- [nio-8101-exec-3] c.c.b.p.p.d.P.selectByPrimaryKey         : <==      Total: 1
http://10.206.20.116:2001/portToPort/add/propertyApi/property
Exception in thread "Thread-304" org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error
at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:124)
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:102)
at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:778)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:736)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:710)
at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:463)
at cn.ccsiot.utils.ApiHttpUtils.doPostByFormData(ApiHttpUtils.java:50)
at cn.ccsiot.biz.productfunctionInfo.productfunction.service.impl.ProductFunctionManagerImpl$1.run(ProductFunctionManagerImpl.java:262)
at java.lang.Thread.run(Thread.java:748)
2021-03-11 17:22:38.840  INFO 38652 --- [nio-8101-exec-3] c.c.b.p.p.web.ProductFunctionController  : 开始时间 = 1615454551127,结束时间：=1615454558840,新增属性耗时：7713
